{"version":3,"sources":["services/notes.js","services/auth.js","services/fetch.js","services/drive.js","services/sets.js","components/ConfirmDialog.js","containers/ConfirmContext.js","components/Loading.js","components/Labels.js","containers/LabelsContainer.js","components/Filters.js","components/NoteList.js","components/Notes.js","services/markdown-converter.js","components/Editor.js","containers/EditorContainer.js","containers/NotesContainer.js","containers/App.js","index.js"],"names":["data","signIn","Promise","resolve","url","googleSignInProperties","params","paramString","Object","keys","map","param","join","win","window","open","timer","setInterval","closed","clearInterval","parseHash","hash","substring","split","reduce","store","error","access_token","close","saveToken","token","localStorage","setItem","getToken","getItem","fetch","addUrl","options","a","async","tryCount","Error","googleApiBaseUrl","headers","axios","response","status","message","ids","getFilesList","pageToken","method","spaces","fields","files","nextPageToken","createFile","fileName","fileData","createFileMetadata","updateFileContent","updateFile","getFile","getFileContent","mimeType","name","parents","id","fileId","JSON","stringify","alt","intersection","setA","setB","length","filter","item","includes","difference","parseTextToWords","text","regex","RegExp","MIN_WORD_LENGTH","toLowerCase","match","addWords","noteId","words","forEach","word","i","j","wordPart","slice","indexing","push","deleteWords","notesIds","splice","indexOf","addLabels","labelsIds","labels","deleteLabels","createLabelData","labelsCrtId","updateLabelData","label","deleteLabelData","labelId","notes","getLabelsData","values","getNotesData","string","note","getNotesIds","getNotesIdsByLabelsIds","getNotesIdsByString","previous","current","ConfirmDialog","locale","cancelAction","mainAction","secondAction","Dialog","onClose","DialogTitle","title","DialogContent","DialogContentText","DialogActions","Button","onClick","color","cancelBtnText","mainBtnText","variant","autoFocus","secondBtnText","ConfirmContext","createContext","ConfirmLocales","ConfirmProvider","children","useState","setOpen","setLocale","mainFunc","setMainFunc","secondFunc","setSecondFunc","Provider","value","openConfirmForm","customLocale","main","second","useStyles","makeStyles","theme","progress","width","height","display","justifyContent","alignItems","Loading","classes","className","CircularProgress","header","padding","spacing","flexFlow","palette","secondary","fontFamily","typography","fontWeight","fontWeightMedium","fontSize","pxToRem","list","listStyle","margin","marginBottom","listItem","labelIcon","labelText","flexGrow","body2","letterSpacing","labelAction","flex","newLabelContainer","marginTop","newLabelText","newLabelButton","marginLeft","scrollbar","maxHeight","breakpoints","up","Labels","checkedIds","toggleCheck","edit","toggleEditor","selectEditedLabel","editedLabel","newLabel","changeName","createLabel","updateLabel","deleteLabel","Typography","IconButton","edge","size","key","Checkbox","disableRipple","checked","Input","onChange","noWrap","disabled","LabelsContainer","setCheckedIds","setLabels","setEdit","setEditedLabel","setNewLabel","useEffect","validateName","newName","originalName","trim","some","index","newCheckedIds","target","currentLabel","currentSetMethod","validateResult","event","stopPropagation","checkedId","paper","borderBottom","divider","body","Filters","desktop","drawer","toggleDrawer","query","setQueryLabelsIds","Drawer","anchor","grid","gridTemplateColumns","gridGap","only","card","border","borderRadius","shape","backgroundColor","background","primary","cardContent","overflow","cardActions","NoteList","openEditor","deleteNote","flipKey","flipId","noteContent","gutterBottom","component","noteLabels","Chip","appbar","position","top","left","zIndex","appBar","toolbar","leftBlock","paddingLeft","marginRight","middleBlock","rightBlock","search","maxWidth","searchRoot","searchInput","paddingRight","fab","boxShadow","down","bottom","right","content","paddingTop","Notes","changeQueryString","Paper","elevation","square","OutlinedInput","root","input","placeholder","startAdornment","InputAdornment","Fab","aria-label","markdownParser","MarkdownIt","htmlToReactParser","HtmlToReactParser","alignSelf","titleBlock","paddingBottom","minHeight","inputRoot","lineHeight","borderBottomColor","drawerPaper","changeModeBtn","Editor","changeField","setLabelsIds","saveNote","closeNote","showRendered","changeRenderedMode","inputBody","useRef","AppBar","fullWidth","autoComplete","focus","markdown","htmlRaw","render","parse","MarkdownConverter","InputBase","inputRef","multiline","EditorContainer","closeEditor","useContext","AppContext","setDrawer","editedNote","setEditedNote","setShowRendered","saveNeed","setSaveNeed","NotesContainer","setQuery","setNotes","setNote","deleteNoteData","newNoteData","changedNote","isChanged","oldNote","oldWords","newWords","deletedWords","addedWords","every","deletedLabels","addedLabels","updateNoteData","notesCrtId","createNoteData","ReactDOM","isLoading","setIsLoading","setError","useMediaQuery","createMuiTheme","xs","sm","md","lg","xl","location","hasOwnProperty","version","init","CssBaseline","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.758b8733.chunk.js","sourcesContent":["import { initDrive, checkFile, getFile, createFile, updateFile } from './drive';\r\nimport { intersection, difference, compare } from './sets';\r\nimport { MIN_WORD_LENGTH } from '../config';\r\n\r\nlet data;\r\n\r\nexport const initApp = async () => {\r\n  await initDrive();\r\n  if (!checkFile('data')) {\r\n    await createFile('data', {\r\n      labels: {},\r\n      notes: {},\r\n      indexing: {},\r\n      options: {\r\n        labelsCrtId: 0,\r\n        notesCrtId: 0,\r\n        version: \"0.1.3\"\r\n      }\r\n    });\r\n  };\r\n  data = await getFile('data');\r\n};\r\n\r\nexport const createNoteData = (note) => {\r\n  const { labelsIds, title, text } = note;\r\n  const id = data.options.notesCrtId + 1;\r\n  data.options.notesCrtId = id;\r\n  addWords(id, parseTextToWords(title));\r\n  addWords(id, parseTextToWords(text));\r\n  addLabels(id, labelsIds);\r\n  data.notes[id] = { id: id, ...note };\r\n  updateFile('data', data);\r\n  return data.notes[id];\r\n};\r\n\r\nexport const deleteNoteData = (id) => {\r\n  const note = data.notes[id];\r\n  deleteWords(id, parseTextToWords(note.title));\r\n  deleteWords(id, parseTextToWords(note.text));\r\n  deleteLabels(id, note.labelsIds);\r\n  delete data.notes[id];\r\n  updateFile('data', data);\r\n};\r\n\r\nexport const updateNoteData = (changedNote) => {\r\n  let isChanged = false;\r\n  const oldNote = data.notes[changedNote.id];\r\n\r\n  if (changedNote.title !== oldNote.title) {\r\n    const oldWords = parseTextToWords(oldNote.title);\r\n    const newWords = parseTextToWords(changedNote.title);\r\n    const deletedWords = difference(oldWords, newWords);\r\n    const addedWords = difference(newWords, oldWords);\r\n    deleteWords(changedNote.id, deletedWords);\r\n    addWords(changedNote.id, addedWords);\r\n    isChanged = true;\r\n  };\r\n\r\n  if (changedNote.text !== oldNote.text) {\r\n    const oldWords = parseTextToWords(oldNote.text);\r\n    const newWords = parseTextToWords(changedNote.text);\r\n    const deletedWords = difference(oldWords, newWords);\r\n    const addedWords = difference(newWords, oldWords);\r\n    deleteWords(changedNote.id, deletedWords);\r\n    addWords(changedNote.id, addedWords);\r\n    isChanged = true;\r\n  };\r\n\r\n  if (!compare(changedNote.labelsIds, oldNote.labelsIds)) {\r\n    const deletedLabels = difference(oldNote.labelsIds, changedNote.labelsIds);\r\n    const addedLabels = difference(changedNote.labelsIds, oldNote.labelsIds);\r\n    deleteLabels(changedNote.id, deletedLabels);\r\n    addLabels(changedNote.id, addedLabels);\r\n    isChanged = true;\r\n  };\r\n\r\n  if (isChanged) {\r\n    data.notes[changedNote.id] = changedNote;\r\n    updateFile('data', data);\r\n  };\r\n\r\n  return data.notes[changedNote.id];\r\n};\r\n\r\nconst parseTextToWords = (text) => {\r\n  const regex = new RegExp(`[a-zа-яё]{${MIN_WORD_LENGTH},}`, 'gu');\r\n  return text.toLowerCase().match(regex) || [];\r\n};\r\n\r\nconst addWords = (noteId, words) => {\r\n  words.forEach(word => {\r\n    for (let i = 0; i <= word.length - MIN_WORD_LENGTH; i++) {\r\n      for (let j = word.length; j >= i + MIN_WORD_LENGTH; j--) {\r\n        const wordPart = word.slice(i, j);\r\n        if (!data.indexing[wordPart]) {\r\n          data.indexing[wordPart] = [noteId];\r\n        } else {\r\n          if (!data.indexing[wordPart].includes(noteId)) {\r\n            data.indexing[wordPart].push(noteId);\r\n          };\r\n        };\r\n      };\r\n    };\r\n  });\r\n};\r\n\r\nconst deleteWords = (noteId, words) => {\r\n  words.forEach(word => {\r\n    for (let i = 0; i <= word.length - MIN_WORD_LENGTH; i++) {\r\n      for (let j = word.length; j >= i + MIN_WORD_LENGTH; j--) {\r\n        const wordPart = word.slice(i, j);\r\n        if (data.indexing[wordPart] && data.indexing[wordPart].includes(noteId)) {\r\n          if (data.indexing[wordPart].length === 1) {\r\n            delete data.indexing[wordPart];\r\n          } else {\r\n            const notesIds = data.indexing[wordPart];\r\n            notesIds.splice(notesIds.indexOf(noteId), 1);\r\n            data.indexing[wordPart] = notesIds;\r\n          };\r\n        };\r\n      };\r\n    };\r\n  });\r\n};\r\n\r\nconst addLabels = (noteId, labelsIds) => {\r\n  labelsIds.forEach(id => data.labels[id].notesIds.push(noteId));\r\n};\r\n\r\nconst deleteLabels = (noteId, labelsIds) => {\r\n  labelsIds.forEach(id => {\r\n    const notesIds = data.labels[id].notesIds;\r\n    notesIds.splice(notesIds.indexOf(noteId), 1);\r\n    data.labels[id].notesIds = notesIds;\r\n  });\r\n};\r\n\r\nexport const createLabelData = async (name) => {\r\n  const id = data.options.labelsCrtId + 1;\r\n  data.options.labelsCrtId = id;\r\n  data.labels[id] = {\r\n    id: id,\r\n    name: name,\r\n    notesIds: []\r\n  };\r\n  await updateFile('data', data);\r\n};\r\n\r\nexport const updateLabelData = async (label) => {\r\n  data.labels[label.id] = label;\r\n  await updateFile('data', data);\r\n};\r\n\r\nexport const deleteLabelData = async (labelId) => {\r\n  data.labels[labelId].notesIds.forEach((id) => {\r\n    const { labelsIds } = data.notes[id];\r\n    labelsIds.splice(labelsIds.indexOf(labelId), 1);\r\n    data.notes[id].labelsIds = labelsIds;\r\n  });\r\n  delete data.labels[labelId];\r\n  await updateFile('data', data);\r\n};\r\n\r\nexport const getLabelsData = (labelsIds) => {\r\n  if (labelsIds) {\r\n    return labelsIds.map(id => data.labels[id]);\r\n  };\r\n  return Object.values(data.labels).filter(label => label.id);\r\n};\r\n\r\nexport const getNotesData = ({ string, labelsIds }) => {\r\n  if (string.length < MIN_WORD_LENGTH && !labelsIds.length) {\r\n    return Object.values(data.notes).filter(note => note.id);\r\n  };\r\n  return getNotesIds(string, labelsIds).map(id => data.notes[id]);\r\n};\r\n\r\nconst getNotesIds = (string, labelsIds) => {\r\n  if (!string) {\r\n    return getNotesIdsByLabelsIds(labelsIds);\r\n  };\r\n  let ids = getNotesIdsByString(string);\r\n  if (ids.length === 0 || !labelsIds.length) {\r\n    return ids;\r\n  };\r\n  return intersection(ids, getNotesIdsByLabelsIds(labelsIds));\r\n};\r\n\r\nconst getNotesIdsByString = (string) => {\r\n  const words = parseTextToWords(string);\r\n  if (words.length === 0) {\r\n    return [];\r\n  };\r\n  if (words.length === 1) {\r\n    return data.indexing[words[0]] || [];\r\n  };\r\n  return words\r\n    .map(word => data.indexing[word] || [])\r\n    .reduce((previous, current) => intersection(previous, current));\r\n};\r\n\r\nconst getNotesIdsByLabelsIds = (labelsIds) => {\r\n  if (labelsIds.length === 1) {\r\n    return data.labels[labelsIds[0]].notesIds;\r\n  };\r\n  return labelsIds\r\n    .map(id => data.labels[id].notesIds)\r\n    .reduce((previous, current) => intersection(previous, current));\r\n};\r\n","import { googleSignInProperties } from '../config';\r\n\r\nexport const signIn = () => {\r\n  return new Promise((resolve) => {\r\n    let { url, params } = googleSignInProperties;\r\n    if (params) {\r\n      const paramString = Object.keys(params)\r\n        .map(param => `${param}=${params[param]}`)\r\n        .join('&');\r\n      url += `?${paramString}`;\r\n    };\r\n    const win = window.open(url, 'signin', 'modal');\r\n    const timer = setInterval(() => {\r\n      if (!win.closed) {\r\n        return;\r\n      };\r\n      resolve();\r\n      clearInterval(timer);\r\n    }, 500);\r\n  });\r\n};\r\n\r\nexport const parseHash = (hash) => {\r\n  if (hash) {\r\n    const { error, access_token } = hash\r\n      .substring(1)\r\n      .split('&')\r\n      .reduce((store, param) => {\r\n        param = param.split('=');\r\n        store[param[0]] = param[1];\r\n        return store;\r\n      }, {});\r\n    if (error) {\r\n      window.close();\r\n    } else if (access_token) {\r\n      saveToken(access_token);\r\n    };\r\n  };\r\n  window.close();\r\n};\r\n\r\nconst saveToken = token => {\r\n  localStorage.setItem('token', token);\r\n};\r\n\r\nexport const getToken = () => {\r\n  return localStorage.getItem('token');\r\n};\r\n","import axios from 'axios';\r\nimport { getToken, signIn } from './auth';\r\nimport { googleApiBaseUrl } from '../config';\r\nexport const fetch = async (addUrl, options, tryCount = 0) => {\r\n  if (tryCount === 3) {\r\n    throw new Error('Request rejected three times');\r\n  } \r\n  tryCount += 1;\r\n  const token = getToken();\r\n  if (token) {\r\n    try {\r\n      const url = googleApiBaseUrl + addUrl;\r\n      const headers = {\r\n        'Authorization': `Bearer ${token}`\r\n      };\r\n      const { data } = await axios({\r\n        url,\r\n        headers,\r\n        ...options\r\n      });\r\n      return data;\r\n    } catch (err) {\r\n      if (err.response && err.response.status === 401) {\r\n        await signIn();\r\n        return await fetch(addUrl, options, tryCount);\r\n      } else {\r\n        throw new Error(err.message);\r\n      };\r\n    };\r\n  } else {\r\n    await signIn();\r\n    return await fetch(addUrl, options, tryCount);\r\n  };\r\n};\r\n","import { fetch } from './fetch';\r\n\r\nlet ids = {};\r\n\r\nexport const initDrive = async () => {\r\n  (await getFilesList())\r\n    .forEach(({ id, name }) => {\r\n      ids[name] = id;\r\n    });\r\n};\r\n\r\n\r\nconst getFilesList = async (pageToken) => {\r\n  try {\r\n    const { files, nextPageToken } = await fetch('drive/v3/files', {\r\n      method: 'get',\r\n      params: {\r\n        spaces: 'appDataFolder',\r\n        pageToken: pageToken,\r\n        fields: 'nextPageToken, files(id, name)'\r\n      }\r\n    });\r\n    return (nextPageToken)\r\n      ? [...files, ...getFilesList(nextPageToken)]\r\n      : files;\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nexport const checkFile = (fileName) => {\r\n  return ids.hasOwnProperty(fileName);\r\n};\r\n\r\nexport const checkFiles = (fileNameList) => {\r\n  return fileNameList.every(name => ids.hasOwnProperty(name));\r\n};\r\n\r\nexport const createFile = async (fileName, fileData) => {\r\n  await createFileMetadata(fileName);\r\n  await updateFileContent(ids[fileName], fileData);\r\n};\r\n\r\nexport const createFiles = async (fileList) => {\r\n  await Promise.all(fileList\r\n    .map(async ({ name }) => await createFileMetadata(name))\r\n  );\r\n  await updateFiles(fileList);\r\n};\r\n\r\nexport const updateFile = async (fileName, fileData) => {\r\n  await updateFileContent(ids[fileName], fileData);\r\n};\r\n\r\nexport const updateFiles = async (fileList) => {\r\n  await Promise.all(fileList\r\n    .map(async ({ name, data }) => await updateFileContent(ids[name], data))\r\n  );\r\n};\r\n\r\nexport const deleteFile = async (fileName) => {\r\n  await removeFile(ids[fileName]);\r\n};\r\n\r\nexport const deleteFiles = async (fileNameList) => {\r\n  await Promise.all(fileNameList\r\n    .map(async fileName => await removeFile(ids[fileName]))\r\n  );\r\n};\r\n\r\nexport const getFile = async (fileName) => {\r\n  return await getFileContent(ids[fileName]);\r\n};\r\n\r\nexport const getFiles = async (fileNameList) => {\r\n  return await Promise.all(\r\n    fileNameList.map(async fileName => await getFile(fileName))\r\n  );\r\n};\r\n\r\nconst createFileMetadata = async (fileName) => {\r\n  try {\r\n    const { id } = await fetch('drive/v3/files', {\r\n      method: 'post',\r\n      data: {\r\n        mimeType: 'application/json',\r\n        name: fileName,\r\n        parents: ['appDataFolder']\r\n      }\r\n    });\r\n    ids[fileName] = id;\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nconst updateFileContent = async (fileId, fileData) => {\r\n  try {\r\n    await fetch(`upload/drive/v3/files/${fileId}`, {\r\n      method: 'patch',\r\n      data: (typeof fileData === 'string')\r\n        ? fileData\r\n        : JSON.stringify(fileData)\r\n    });\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nexport const removeFile = async (fileId) => {\r\n  try {\r\n    await fetch(`drive/v3/files/${fileId}`, {\r\n      method: 'delete'\r\n    });\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nconst getFileContent = async (fileId) => {\r\n  try {\r\n    return await fetch(`drive/v3/files/${fileId}`, {\r\n      method: 'get',\r\n      params: {\r\n        alt: 'media'\r\n      }\r\n    });\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\n//For tests and debugging\r\nexport const deleteAllData = async () => {\r\n  await Promise.all(\r\n    (await getFilesList())\r\n      .map(async ({ id }) => await removeFile(id))\r\n  );\r\n};\r\n","export const intersection = (setA, setB) => {\r\n  if (setB.length < setA.length) {\r\n    [setA, setB] = [setB, setA];\r\n  };\r\n  return setA.filter(item => setB.includes(item));\r\n};\r\n\r\nexport const difference = (setA, setB) => {\r\n  return setA.filter(item => !setB.includes(item));\r\n};\r\n\r\n//Not universal. Only for this task. Is correctly if each set dont have duplicates\r\nexport const compare = (setA, setB) => {\r\n  if (setA.length !== setB.length) {\r\n    return false;\r\n  };\r\n  return setA.every(item => setB.includes(item));\r\n};\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nconst ConfirmDialog = ({\r\n  open,\r\n  locale,\r\n  cancelAction,\r\n  mainAction,\r\n  secondAction\r\n}) => {\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={cancelAction}\r\n    >\r\n      <DialogTitle>\r\n        {locale.title}\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          {locale.text}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {\r\n          mainAction\r\n            ? (\r\n              secondAction\r\n                ? (\r\n                  <>\r\n                    <Button onClick={cancelAction} color=\"primary\">\r\n                      {locale.cancelBtnText}\r\n                    </Button>\r\n                    <Button onClick={mainAction} color=\"primary\">\r\n                      {locale.mainBtnText}\r\n                    </Button>\r\n                    <Button onClick={secondAction} variant=\"contained\" color=\"primary\" autoFocus>\r\n                      {locale.secondBtnText}\r\n                    </Button>\r\n                  </>\r\n                )\r\n                : (\r\n                  <>\r\n                    <Button onClick={cancelAction} color=\"primary\">\r\n                      {locale.cancelBtnText}\r\n                    </Button>\r\n                    <Button onClick={mainAction} variant=\"contained\" color=\"primary\" autoFocus>\r\n                      {locale.mainBtnText}\r\n                    </Button>\r\n                  </>\r\n                )\r\n            )\r\n            : (\r\n              <Button onClick={cancelAction} variant=\"contained\" color=\"primary\" autoFocus>\r\n                {\"OK\"}\r\n              </Button>\r\n            )\r\n        }\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ConfirmDialog;\r\n","import React, { useState, createContext } from 'react';\r\nimport ConfirmDialog from '../components/ConfirmDialog';\r\n\r\nconst ConfirmContext = createContext(null);\r\n\r\nexport const ConfirmLocales = {\r\n  Default: {\r\n    title: \"Confirm action\",\r\n    text: \"\",\r\n    cancelBtnText: \"Cancel\",\r\n    mainBtnText: \"Confirm\",\r\n    secondBtnText: \"Do additional action\"\r\n  },\r\n  DeleteNote: {\r\n    title: \"Deleting note\",\r\n    text: \"Do you really want to delete note?\",\r\n    mainBtnText: \"Delete\"\r\n  },\r\n  EmptyNote: {\r\n    title: \"Empty note\",\r\n    text: \"You can't add note without title\"\r\n  },\r\n  CloseWithoutSaving: {\r\n    title: \"Close unsaved note\",\r\n    text: \"Do you really want to close note without saving? All changes will be discarded.\",\r\n    cancelBtnText: \"Cancel\",\r\n    mainBtnText: \"Confirm\",\r\n    secondBtnText: \"Save and close\"\r\n  }\r\n};\r\n\r\nexport const ConfirmProvider = ({ children }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [locale, setLocale] = useState(ConfirmLocales.Default);\r\n  const [mainFunc, setMainFunc] = useState(null);\r\n  const [secondFunc, setSecondFunc] = useState(null);\r\n\r\n  const openConfirmForm = (customLocale, main, second) => {\r\n    if (customLocale) {\r\n      setLocale({ ...locale, ...customLocale });\r\n    };\r\n    if (main) {\r\n      setMainFunc(() => main);\r\n    };\r\n    if (second) {\r\n      setSecondFunc(() => second);\r\n    };\r\n    setOpen(true);\r\n  };\r\n\r\n  const cancelAction = () => {\r\n    setOpen(false);\r\n    setMainFunc(null);\r\n    setSecondFunc(null);\r\n    setLocale(ConfirmLocales.Default);\r\n  };\r\n\r\n  const mainAction = () => {\r\n    mainFunc();\r\n    cancelAction();\r\n  };\r\n\r\n  const secondAction = () => {\r\n    secondFunc();\r\n    mainAction();\r\n  };\r\n\r\n  return (\r\n    <ConfirmContext.Provider\r\n      value={{\r\n        openConfirmForm\r\n      }}\r\n    >\r\n      {children}\r\n      <ConfirmDialog\r\n        open={open}\r\n        locale={locale}\r\n        cancelAction={cancelAction}\r\n        mainAction={mainFunc ? mainAction : null}\r\n        secondAction={secondFunc ? secondAction : null}\r\n      />\r\n    </ConfirmContext.Provider>\r\n  );\r\n}\r\n\r\nexport default ConfirmContext;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  progress: {\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  }\r\n}));\r\n\r\nconst Loading = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.progress}>\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n  handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport SimpleBar from 'simplebar-react';\r\nimport 'simplebar/dist/simplebar.min.css';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Input from '@material-ui/core/Input';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DeleteRoundedIcon from \"@material-ui/icons/DeleteRounded\";\r\nimport DoneRoundedIcon from '@material-ui/icons/DoneRounded';\r\nimport EditRoundedIcon from \"@material-ui/icons/EditRounded\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  header: {\r\n    padding: theme.spacing(0, 2),\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  title: {\r\n    color: theme.palette.text.secondary,\r\n    fontFamily: theme.typography.fontFamily,\r\n    fontWeight: theme.typography.fontWeightMedium,\r\n    fontSize: theme.typography.pxToRem(14)\r\n  },\r\n  list: {\r\n    listStyle: \"none\",\r\n    padding: 0,\r\n    margin: 0,\r\n    \"& > li:not(:last-child)\": {\r\n      marginBottom: 6\r\n    }\r\n  },\r\n  listItem: {\r\n    width: \"100%\",\r\n    padding: \"0 6px\",\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  labelIcon: {\r\n    padding: 9\r\n  },\r\n  labelText: {\r\n    flexGrow: 1,\r\n    ...theme.typography.body2,\r\n    letterSpacing: \"normal\",\r\n    margin: theme.spacing(0, 1)\r\n  },\r\n  labelAction: {\r\n    width: 42,\r\n    flex: \"0 0 auto\"\r\n  },\r\n  newLabelContainer: {\r\n    padding: theme.spacing(0, 2),\r\n    marginTop: theme.spacing(0.5),\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  newLabelText: {\r\n    flexGrow: 1,\r\n    margin: theme.spacing(0, 1),\r\n    ...theme.typography.body2,\r\n    letterSpacing: \"normal\"\r\n  },\r\n  newLabelButton: {\r\n    marginLeft: theme.spacing(1)\r\n  },\r\n  scrollbar: {\r\n    maxHeight: \"calc(100vh - 144px)\",\r\n    [theme.breakpoints.up('sm')]: {\r\n      maxHeight: \"calc(100vh - 200px)\"\r\n    }\r\n  }\r\n}));\r\n\r\nconst Labels = ({\r\n  labels,\r\n  checkedIds,\r\n  toggleCheck,\r\n  edit,\r\n  toggleEditor,\r\n  selectEditedLabel,\r\n  editedLabel,\r\n  newLabel,\r\n  changeName,\r\n  createLabel,\r\n  updateLabel,\r\n  deleteLabel\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.header}>\r\n        <Typography className={classes.title}>\r\n          Labels\r\n        </Typography>\r\n        <IconButton edge=\"end\" size=\"small\" onClick={toggleEditor}>\r\n          <EditRoundedIcon fontSize=\"small\" />\r\n        </IconButton>\r\n      </div>\r\n      <SimpleBar className={classes.scrollbar}>\r\n        <ul className={classes.list}>\r\n          {\r\n            labels.map((label) => {\r\n              return (\r\n                <li\r\n                  key={label.id}\r\n                  className={classes.listItem}\r\n                  onClick={edit ? selectEditedLabel(label) : toggleCheck(label.id)}\r\n                >\r\n                  {\r\n                    edit\r\n                      ? (\r\n                        <IconButton\r\n                          color=\"primary\"\r\n                          className={classes.labelIcon}\r\n                          onClick={deleteLabel(label.id)}\r\n                        >\r\n                          <DeleteRoundedIcon color=\"primary\" />\r\n                        </IconButton >\r\n                      )\r\n                      : (\r\n                        <Checkbox\r\n                          disableRipple\r\n                          checked={checkedIds.includes(label.id)}\r\n                          color=\"primary\"\r\n                        />\r\n                      )\r\n                  }\r\n                  {\r\n                    label.id === editedLabel.id\r\n                      ? (\r\n                        <Input\r\n                          error={editedLabel.error}\r\n                          value={editedLabel.name}\r\n                          autoFocus\r\n                          className={classes.labelText}\r\n                          onChange={changeName(label.name)}\r\n                        />\r\n                      )\r\n                      : (\r\n                        <Typography\r\n                          noWrap\r\n                          className={classes.labelText}\r\n                        >\r\n                          {label.name}\r\n                        </Typography>\r\n                      )\r\n                  }\r\n                  <div className={classes.labelAction}>\r\n                    {\r\n                      label.id === editedLabel.id && (\r\n                        <IconButton\r\n                          color=\"primary\"\r\n                          disabled={editedLabel.disabled}\r\n                          className={classes.labelIcon}\r\n                          onClick={updateLabel}\r\n                        >\r\n                          <DoneRoundedIcon color={editedLabel.disabled ? \"disabled\" : \"primary\"} />\r\n                        </IconButton>\r\n                      )\r\n                    }\r\n                  </div>\r\n                </li >\r\n              );\r\n            })\r\n          }\r\n        </ul>\r\n      </SimpleBar>\r\n      {\r\n        edit && (\r\n          <div className={classes.newLabelContainer}>\r\n            <Input\r\n              error={newLabel.error}\r\n              value={newLabel.name}\r\n              onChange={changeName()}\r\n              className={classes.newLabelText}\r\n            />\r\n            <Button\r\n              disabled={newLabel.disabled}\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.newLabelButton}\r\n              onClick={createLabel}\r\n            >\r\n              Add\r\n            </Button>\r\n          </div>\r\n        )\r\n      }\r\n    </div >\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n  handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Labels;\r\n","import React, { useState, useEffect } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { getLabelsData, createLabelData, updateLabelData, deleteLabelData } from '../services/notes';\r\nimport Labels from '../components/Labels';\r\n\r\nconst LabelsContainer = ({ open, checkedIds, setCheckedIds }) => {\r\n  const [labels, setLabels] = useState(getLabelsData());\r\n  const [edit, setEdit] = useState(false);\r\n  const [editedLabel, setEditedLabel] = useState({});\r\n  const [newLabel, setNewLabel] = useState({ name: '', disabled: true });\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setEdit(false);\r\n    };\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    if (!edit) {\r\n      setEditedLabel({});\r\n      setNewLabel({ name: '', disabled: true });\r\n    }\r\n  }, [edit]);\r\n\r\n  const toggleCheck = (id) => () => {\r\n    const index = checkedIds.indexOf(id);\r\n    const newCheckedIds = [...checkedIds];\r\n    if (index === -1) {\r\n      newCheckedIds.push(id);\r\n    } else {\r\n      newCheckedIds.splice(index, 1);\r\n    };\r\n    setCheckedIds(newCheckedIds);\r\n  };\r\n\r\n  const toggleEditor = () => {\r\n    setEdit(!edit);\r\n  };\r\n\r\n  const selectEditedLabel = (label) => () => {\r\n    if (label) {\r\n      if (label.id !== editedLabel.id) {\r\n        setEditedLabel({ ...label, disabled: true });\r\n      };\r\n    } else {\r\n      setEditedLabel({});\r\n    };\r\n  };\r\n\r\n  const createLabel = async () => {\r\n    await createLabelData(newLabel.name);\r\n    setNewLabel({ name: '', disabled: true });\r\n    setLabels(getLabelsData());\r\n  };\r\n\r\n  const updateLabel = async (event) => {\r\n    event.stopPropagation();\r\n    await updateLabelData(editedLabel);\r\n    setLabels(getLabelsData());\r\n  };\r\n\r\n  const deleteLabel = (id) => async (event) => {\r\n    event.stopPropagation();\r\n    await deleteLabelData(id);\r\n    setLabels(getLabelsData());\r\n    setCheckedIds(checkedIds.filter(checkedId => checkedId !== id));\r\n  };\r\n\r\n  const changeName = (originalName) => ({ target: { value } }) => {\r\n    const currentLabel = originalName ? editedLabel : newLabel;\r\n    const currentSetMethod = originalName ? setEditedLabel : setNewLabel;\r\n    const validateResult = validateName(value, originalName);\r\n    currentSetMethod({ ...currentLabel, name: value, ...validateResult });\r\n  };\r\n\r\n  const validateName = (newName, originalName) => {\r\n    newName = newName.trim();\r\n\r\n    if (!newName.length) {\r\n      return { error: true, message: \"Only spaces\", disabled: true };\r\n    };\r\n\r\n    if (originalName && newName === originalName) {\r\n      return { error: false, disabled: false };\r\n    };\r\n\r\n    const dublicate = labels.some(({ name }) => name === newName);\r\n    if (dublicate) {\r\n      return { error: true, message: \"Dublicate\", disabled: true };\r\n    } else {\r\n      return { error: false, disabled: false };\r\n    };\r\n  };\r\n\r\n  return (\r\n    <Labels\r\n      labels={labels}\r\n      checkedIds={checkedIds}\r\n      toggleCheck={toggleCheck}\r\n      edit={edit}\r\n      toggleEditor={toggleEditor}\r\n      selectEditedLabel={selectEditedLabel}\r\n      editedLabel={editedLabel}\r\n      newLabel={newLabel}\r\n      changeName={changeName}\r\n      createLabel={createLabel}\r\n      updateLabel={updateLabel}\r\n      deleteLabel={deleteLabel}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LabelsContainer;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport LabelsContainer from '../containers/LabelsContainer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    width: 256\r\n  },\r\n  header: {\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    height: 56,\r\n    borderBottom: `1px solid ${theme.palette.divider}`,\r\n    padding: theme.spacing(0, 2)\r\n  },\r\n  body: {\r\n    padding: theme.spacing(1, 0)\r\n  }\r\n}));\r\n\r\nconst Filters = ({\r\n  desktop,\r\n  drawer,\r\n  toggleDrawer,\r\n  query,\r\n  setQueryLabelsIds\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n      <Drawer\r\n        classes={{\r\n          paper: classes.paper\r\n        }}\r\n        variant={desktop ? \"persistent\" : \"temporary\"}\r\n        open={drawer}\r\n        onClose={toggleDrawer}\r\n        anchor=\"right\"\r\n      >\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h6\" noWrap>\r\n            Filters\r\n            </Typography>\r\n          {\r\n            !desktop && (\r\n              <IconButton edge=\"end\" color=\"inherit\" onClick={toggleDrawer}>\r\n                <CloseRoundedIcon />\r\n              </IconButton>\r\n            )\r\n          }\r\n        </div>\r\n        <div className={classes.body}>\r\n          <LabelsContainer\r\n            open={drawer}\r\n            checkedIds={query.labelsIds}\r\n            setCheckedIds={setQueryLabelsIds}\r\n          />\r\n        </div>\r\n      </Drawer>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n        handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Filters;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { getLabelsData } from '../services/notes';\r\nimport { Flipper, Flipped } from \"react-flip-toolkit\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => {\r\n  return ({\r\n    grid: {\r\n      display: \"grid\",\r\n      gridTemplateColumns: \"repeat(auto-fill, minmax(320px, 1fr))\",\r\n      gridGap: theme.spacing(1),\r\n      width: \"100%\",\r\n      padding: theme.spacing(1),\r\n      [theme.breakpoints.only(\"sm\")]: {\r\n        padding: theme.spacing(1, 11)\r\n      },\r\n      [theme.breakpoints.up(\"md\")]: {\r\n        gridGap: theme.spacing(2),\r\n        padding: theme.spacing(2, 2, 0, 18)\r\n      }\r\n    },\r\n    card: {\r\n      display: \"flex\",\r\n      flexFlow: \"column nowrap\",\r\n      justifyContent: \"space-between\",\r\n      width: \"100%\",\r\n      height: 200,\r\n      border: `1px solid ${theme.palette.divider}`,\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: theme.palette.background.paper,\r\n      color: theme.palette.text.primary\r\n    },\r\n    cardContent: {\r\n      flex: \"1 1 auto\",\r\n      margin: 16,\r\n      overflow: \"hidden\"\r\n    },\r\n    cardActions: {\r\n      flex: \"0 0 auto\",\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      margin: 8,\r\n      '& > :not(:first-child)': {\r\n        marginLeft: 8\r\n      }\r\n    }\r\n  })\r\n});\r\n\r\nconst NoteList = ({ desktop, notes, openEditor, deleteNote }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Flipper flipKey={JSON.stringify(notes.map(({ id }) => id))}>\r\n      <div className={classes.grid}>\r\n        {\r\n          notes.map(note => {\r\n            const { id, title, text, labelsIds } = note;\r\n            return (\r\n              <Flipped flipId={id}>\r\n                <div className={classes.card} key={id}>\r\n                  <div className={classes.cardContent}>\r\n                    <div className={classes.noteContent}>\r\n                      {title && (\r\n                        <Typography gutterBottom variant=\"h5\" component=\"h3\">\r\n                          {title}\r\n                        </Typography>\r\n                      )}\r\n                      {text && (\r\n                        <Typography variant=\"body1\">\r\n                          {text}\r\n                        </Typography>\r\n                      )}\r\n                    </div>\r\n                    <div className={classes.noteLabels}>\r\n                      {\r\n                        getLabelsData(labelsIds).map(({ id, name }) => {\r\n                          return (\r\n                            <Chip\r\n                              key={id}\r\n                              size={\"small\"}\r\n                              label={name}\r\n                            />\r\n                          )\r\n                        })\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                  <div className={classes.cardActions}>\r\n                    <Button size=\"small\" color=\"primary\"\r\n                      onClick={deleteNote(id)}\r\n                    >\r\n                      {\"Delete\"}\r\n                    </Button>\r\n                    <Button size=\"small\" color=\"primary\"\r\n                      onClick={openEditor(note)}\r\n                    >\r\n                      {\"Edit\"}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </Flipped>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    </Flipper>\r\n  );\r\n};\r\n\r\nNoteList.propTypes = {\r\n  children: PropTypes.arrayOf(PropTypes.element)\r\n};\r\n\r\nexport default NoteList;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport AddRoundedIcon from '@material-ui/icons/AddRounded';\r\nimport SearchRoundedIcon from '@material-ui/icons/SearchRounded';\r\nimport FilterListRoundedIcon from '@material-ui/icons/FilterListRounded';\r\nimport Filters from './Filters';\r\nimport NoteList from './NoteList';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  appbar: {\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    width: \"100%\",\r\n    zIndex: theme.zIndex.appBar,\r\n    borderBottom: `1px solid ${theme.palette.divider}`,\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      width: \"calc(100% - 256px)\",\r\n    }\r\n  },\r\n  toolbar: {\r\n    display: \"flex\",\r\n    flexFlow: \"row wrap\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    height: 55,\r\n    padding: theme.spacing(0.5, 2)\r\n  },\r\n  leftBlock: {\r\n    display: \"none\",\r\n    [theme.breakpoints.up('sm')]: {\r\n      flex: \"0 0 120px\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      paddingLeft: theme.spacing(7),\r\n      marginRight: theme.spacing(0.5)\r\n    }\r\n  },\r\n  middleBlock: {\r\n    flex: \"1 1 auto\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\"\r\n  },\r\n  rightBlock: {\r\n    flex: \"0 0 auto\",\r\n    display: \"flex\",\r\n    marginLeft: theme.spacing(0.5),\r\n    justifyContent: \"flex-end\",\r\n    [theme.breakpoints.up('sm')]: {\r\n      flex: \"0 0 120px\"\r\n    }\r\n  },\r\n  search: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    maxWidth: 720\r\n  },\r\n  searchRoot: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    height: 39\r\n  },\r\n  searchInput: {\r\n    paddingRight: theme.spacing(1)\r\n  },\r\n  fab: {\r\n    position: \"fixed\",\r\n    boxShadow: \"none\",\r\n    '&:active': {\r\n      boxShadow: \"none\",\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      top: theme.spacing(9),\r\n      left: theme.spacing(9),\r\n    },\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      bottom: theme.spacing(2),\r\n      right: theme.spacing(2)\r\n    }\r\n  },\r\n  content: {\r\n    paddingTop: theme.spacing(7),\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      paddingRight: 256\r\n    }\r\n  }\r\n}));\r\n\r\nconst Notes = ({\r\n  desktop,\r\n  notes,\r\n  drawer,\r\n  toggleDrawer,\r\n  query,\r\n  changeQueryString,\r\n  setQueryLabelsIds,\r\n  openEditor,\r\n  deleteNote\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <Paper\r\n        elevation={0}\r\n        square\r\n        className={classes.appbar}\r\n      >\r\n        <div className={classes.toolbar}>\r\n          <div className={classes.leftBlock}>\r\n            <Typography variant=\"h6\" component=\"h1\" noWrap>\r\n              Notes\r\n            </Typography>\r\n          </div>\r\n          <div className={classes.middleBlock}>\r\n            <OutlinedInput\r\n              className={classes.search}\r\n              classes={{\r\n                root: classes.searchRoot,\r\n                input: classes.searchInput\r\n              }}\r\n              placeholder=\"Search…\"\r\n              value={query.string}\r\n              onChange={changeQueryString}\r\n              autoFocus\r\n              startAdornment={\r\n                <InputAdornment position=\"start\">\r\n                  <SearchRoundedIcon />\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </div>\r\n          <div className={classes.rightBlock}>\r\n            {\r\n              !desktop && (\r\n                <IconButton edge=\"end\" color=\"inherit\" onClick={toggleDrawer}>\r\n                  <FilterListRoundedIcon />\r\n                </IconButton>\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n      </Paper>\r\n      <div\r\n        className={classes.content}\r\n      >\r\n        <NoteList\r\n          notes={notes}\r\n          desktop={desktop}\r\n          openEditor={openEditor}\r\n          deleteNote={deleteNote}\r\n        />\r\n      </div>\r\n      <Filters\r\n        desktop={desktop}\r\n        drawer={drawer}\r\n        toggleDrawer={toggleDrawer}\r\n        query={query}\r\n        setQueryLabelsIds={setQueryLabelsIds}\r\n      />\r\n      <Fab\r\n        className={classes.fab}\r\n        color=\"primary\"\r\n        aria-label=\"add\"\r\n        onClick={openEditor()}\r\n      >\r\n        <AddRoundedIcon />\r\n      </Fab>\r\n    </>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n        handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Notes;\r\n","import MarkdownIt from 'markdown-it';\r\nimport { Parser as HtmlToReactParser } from 'html-to-react';\r\n\r\nconst markdownParser = new MarkdownIt();\r\nconst htmlToReactParser = new HtmlToReactParser();\r\n\r\nexport const toReactElement = (markdown) => {\r\n  const htmlRaw = markdownParser.render(markdown);\r\n  const reactElement =  htmlToReactParser.parse(htmlRaw);\r\n\r\n  return reactElement;\r\n}","import React, { useRef } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport LabelsContainer from '../containers/LabelsContainer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ArrowBackRoundedIcon from '@material-ui/icons/ArrowBackRounded';\r\nimport BookmarksRoundedIcon from '@material-ui/icons/BookmarksRounded';\r\nimport SaveRoundedIcon from '@material-ui/icons/SaveRounded';\r\nimport * as MarkdownConverter from '../services/markdown-converter';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  toolbar: {\r\n    display: \"flex\",\r\n    flexFlow: \"row wrap\",\r\n    height: 112,\r\n    padding: theme.spacing(0.5, 2)\r\n  },\r\n  leftBlock: {\r\n    flex: \"1 0 0\",\r\n    alignSelf: \"flex-start\",\r\n    display: \"flex\"\r\n  },\r\n  rightBlock: {\r\n    flex: \"1 0 0\",\r\n    alignSelf: \"flex-start\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\"\r\n  },\r\n  titleBlock: {\r\n    flex: \"1 0 100%\",\r\n    //alignSelf: \"flex-start\",\r\n    paddingBottom: theme.spacing(1.5),\r\n    paddingLeft: theme.spacing(7)\r\n  },\r\n  note: {\r\n    padding: theme.spacing(17, 2, 0, 2),\r\n    minHeight: \"100vh\"\r\n  },\r\n  inputRoot: {\r\n    color: \"rgb(255, 255, 255)\",\r\n    fontSize: \"1.5rem\",\r\n    lineHeight: 1.33,\r\n    letterSpacing: \"0em\",\r\n    \"&.MuiInput-underline:after\": {\r\n      borderBottomColor: \"rgb(255, 255, 255)\"\r\n    },\r\n    \"&.MuiInput-underline:before\": {\r\n      borderBottomColor: \"rgba(255, 255, 255, 0.42)\"\r\n    },\r\n    \"&.MuiInput-underline:hover:before\": {\r\n      borderBottomColor: \"rgba(255, 255, 255, 0.42)\"\r\n    }\r\n  },\r\n  drawerPaper: {\r\n    width: 256,\r\n    padding: theme.spacing(1, 0),\r\n    [theme.breakpoints.up('sm')]: {\r\n      zIndex: theme.zIndex.appBar - 1,\r\n      top: 112\r\n    }\r\n  },\r\n  fab: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      bottom: theme.spacing(3),\r\n      right: theme.spacing(5) + 256,\r\n    }\r\n  },\r\n  changeModeBtn: {\r\n    position: \"fixed\",\r\n    top: theme.spacing(2) + 112,\r\n    right: theme.spacing(2) + 256\r\n  }\r\n}));\r\n\r\nconst Editor = ({\r\n  note,\r\n  desktop,\r\n  drawer,\r\n  toggleDrawer,\r\n  changeField,\r\n  setLabelsIds,\r\n  saveNote,\r\n  closeNote,\r\n  showRendered,\r\n  changeRenderedMode\r\n}) => {\r\n  const inputBody = useRef(null);\r\n  const classes = useStyles();\r\n\r\n  const onInputFocus = () => {\r\n    if (inputBody.current) {\r\n      inputBody.current.focus();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <AppBar position=\"fixed\">\r\n        <div className={classes.toolbar}>\r\n          <div className={classes.leftBlock}>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={closeNote}>\r\n              <ArrowBackRoundedIcon />\r\n            </IconButton>\r\n          </div>\r\n          <div className={classes.rightBlock}>\r\n            {!desktop && (\r\n              <IconButton edge=\"end\" color=\"inherit\" onClick={toggleDrawer}>\r\n                <BookmarksRoundedIcon />\r\n              </IconButton>\r\n            )}\r\n          </div>\r\n          <div className={classes.titleBlock}>\r\n            <Input\r\n              fullWidth\r\n              classes={{\r\n                root: classes.inputRoot\r\n              }}\r\n              autoComplete=\"off\"\r\n              value={note.title}\r\n              name=\"title\"\r\n              placeholder=\"Title\"\r\n              onChange={changeField}\r\n            />\r\n          </div>\r\n        </div>\r\n      </AppBar>\r\n      <Drawer\r\n        classes={{\r\n          paper: classes.drawerPaper\r\n        }}\r\n        variant={desktop ? \"persistent\" : \"temporary\"}\r\n        open={desktop ? true : drawer}\r\n        onClose={toggleDrawer}\r\n        anchor=\"right\"\r\n      >\r\n        <LabelsContainer\r\n          open={drawer}\r\n          checkedIds={note.labelsIds}\r\n          setCheckedIds={setLabelsIds}\r\n        />\r\n      </Drawer>\r\n      <Paper\r\n        square={false}\r\n        elevation={0}\r\n        className={classes.note}\r\n        onClick={onInputFocus}\r\n      >\r\n      {\r\n        showRendered\r\n          ? MarkdownConverter.toReactElement(note.text)\r\n          : (\r\n            <InputBase\r\n              fullWidth\r\n              inputRef={inputBody}\r\n              multiline={true}\r\n              autoComplete=\"off\"\r\n              value={note.text}\r\n              name=\"text\"\r\n              onChange={changeField}\r\n              placeholder=\"Content\"\r\n            />\r\n          )\r\n      }\r\n      </Paper>\r\n      <Button \r\n        className={classes.changeModeBtn}\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={changeRenderedMode}\r\n      >\r\n        Mode\r\n      </Button>\r\n      <Fab\r\n        className={classes.fab}\r\n        color=\"primary\"\r\n        aria-label=\"add\"\r\n        onClick={saveNote}\r\n      >\r\n        <SaveRoundedIcon />\r\n      </Fab>\r\n    </>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n  handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Editor;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { AppContext } from './App';\r\nimport ConfirmContext, { ConfirmLocales } from './ConfirmContext';\r\nimport Editor from '../components/Editor';\r\n\r\nconst EditorContainer = ({ note, saveNote, closeEditor }) => {\r\n  const { desktop } = useContext(AppContext);\r\n  const { openConfirmForm } = useContext(ConfirmContext);\r\n  const [drawer, setDrawer] = useState(false);\r\n  const [editedNote, setEditedNote] = useState(note);\r\n  const [showRendered, setShowRendered] = useState(false);\r\n  const [saveNeed, setSaveNeed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setEditedNote(note);\r\n  }, [note]);\r\n\r\n  const toggleDrawer = () => {\r\n    setDrawer(!drawer);\r\n  };\r\n\r\n  const setLabelsIds = (labelsIds) => {\r\n    setSaveNeed(true);\r\n    setEditedNote({ ...editedNote, labelsIds: labelsIds });\r\n  };\r\n\r\n  const changeField = ({ target: { name, value } }) => {\r\n    setSaveNeed(true);\r\n    setEditedNote({ ...editedNote, [name]: value });\r\n  };\r\n\r\n  const closeNote = () => {\r\n    if (saveNeed) {\r\n      openConfirmForm(ConfirmLocales.CloseWithoutSaving, closeEditor, saveNote(editedNote));\r\n    } else {\r\n      closeEditor();\r\n    };\r\n  };\r\n\r\n  const changeRenderedMode = () => {\r\n    setShowRendered(!showRendered);\r\n  };\r\n\r\n  const onSaveNote = () => {\r\n    if (!editedNote.title) {\r\n      openConfirmForm(ConfirmLocales.EmptyNote);\r\n    } else {\r\n      saveNote(editedNote)();\r\n      setSaveNeed(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Editor\r\n      desktop={desktop}\r\n      drawer={drawer}\r\n      toggleDrawer={toggleDrawer}\r\n      note={editedNote}\r\n      changeField={changeField}\r\n      setLabelsIds={setLabelsIds}\r\n      saveNote={onSaveNote}\r\n      closeNote={closeNote}\r\n      showRendered={showRendered}\r\n      changeRenderedMode={changeRenderedMode}\r\n    />\r\n  );\r\n};\r\n\r\n/*EditorContainer.propTypes = {\r\n  noteList: PropTypes.exact({\r\n    id: PropTypes.number,\r\n    title: PropTypes.string,\r\n    body: PropTypes.string,\r\n    namespaces: PropTypes.arrayOf(PropTypes.string)\r\n  })\r\n};*/\r\n\r\nexport default EditorContainer;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { getNotesData, createNoteData, updateNoteData, deleteNoteData } from '../services/notes';\r\nimport { AppContext } from '../containers/App';\r\nimport ConfirmContext, { ConfirmLocales } from './ConfirmContext';\r\nimport Notes from '../components/Notes';\r\nimport EditorContainer from './EditorContainer';\r\n\r\nconst NotesContainer = () => {\r\n  const { desktop } = useContext(AppContext);\r\n  const { openConfirmForm } = useContext(ConfirmContext);\r\n  const [drawer, setDrawer] = useState(desktop);\r\n  const [query, setQuery] = useState({ string: '', labelsIds: [] });\r\n  const [notes, setNotes] = useState([]);\r\n  const [note, setNote] = useState(null);\r\n  const [deleteFunc, setDeleteFunc] = useState();\r\n\r\n  useEffect(() => {\r\n    setNotes(getNotesData(query));\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    setDrawer(desktop);\r\n  }, [desktop]);\r\n\r\n  const toggleDrawer = () => {\r\n    setDrawer(!drawer);\r\n  };\r\n\r\n  const changeQueryString = ({ target: { value } }) => {\r\n    setQuery({ ...query, string: value });\r\n  };\r\n\r\n  const setQueryLabelsIds = (checkedIds) => {\r\n    setQuery({ ...query, labelsIds: checkedIds });\r\n  };\r\n\r\n  const openEditor = (note) => () => {\r\n    note = note || {\r\n      labelsIds: [],\r\n      title: '',\r\n      text: ''\r\n    };\r\n    setNote(note);\r\n  };\r\n\r\n  const closeEditor = () => {\r\n    setNote(null);\r\n  };\r\n\r\n  const saveNote = (editedNote) => () => {\r\n    let newNoteData;\r\n    if (editedNote.id) {\r\n      newNoteData = updateNoteData(editedNote);\r\n    } else {\r\n      newNoteData = createNoteData(editedNote);\r\n    };\r\n    setNote(newNoteData);\r\n    setNotes(getNotesData(query));\r\n  };\r\n\r\n  const deleteNote = (id) => () => {\r\n    deleteNoteData(id);\r\n    setNotes(getNotesData(query));\r\n  };\r\n\r\n  const confirmDeleteNote = (id) => () => {\r\n    openConfirmForm(ConfirmLocales.DeleteNote, deleteNote(id));\r\n  };\r\n\r\n  return (\r\n    note\r\n      ? (\r\n        <EditorContainer\r\n          note={note}\r\n          saveNote={saveNote}\r\n          closeEditor={closeEditor}\r\n        />\r\n      )\r\n      : (\r\n        <Notes\r\n          desktop={desktop}\r\n          drawer={drawer}\r\n          toggleDrawer={toggleDrawer}\r\n          notes={notes}\r\n          query={query}\r\n          changeQueryString={changeQueryString}\r\n          setQueryLabelsIds={setQueryLabelsIds}\r\n          openEditor={openEditor}\r\n          deleteNote={confirmDeleteNote}\r\n        />\r\n      )\r\n  );\r\n};\r\n\r\n/*SearchContainer.propTypes = {\r\n  noteList: PropTypes.exact({\r\n    id: PropTypes.number,\r\n    title: PropTypes.string,\r\n    body: PropTypes.string,\r\n    namespaces: PropTypes.arrayOf(PropTypes.string)\r\n  })\r\n};*/\r\n\r\nexport default NotesContainer;\r\n","import React, { useState, useEffect, createContext } from 'react';\r\nimport { parseHash } from '../services/auth';\r\nimport { initApp } from '../services/notes';\r\nimport { ConfirmProvider } from './ConfirmContext';\r\nimport Loading from '../components/Loading';\r\nimport NotesContainer from './NotesContainer';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\nconst AppContext = createContext(null);\r\n\r\nconst App = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const desktop = useMediaQuery('(min-width:768px)');\r\n\r\n  const breakpointValues = {\r\n    xs: 0,\r\n    sm: 576,\r\n    md: 768,\r\n    lg: 992,\r\n    xl: 1200,\r\n  };\r\n  const theme = createMuiTheme({ breakpoints: { values: breakpointValues } });\r\n\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      try {\r\n        const hash = window.location.hash;\r\n        if (hash) {\r\n          parseHash(hash);\r\n        } else {\r\n          await initApp();\r\n        };\r\n      } catch ({ message }) {\r\n        setError(message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      };\r\n    };\r\n    init();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <ThemeProvider theme={theme}>\r\n        <AppContext.Provider\r\n          value={{\r\n            isLoading,\r\n            setIsLoading,\r\n            error,\r\n            setError,\r\n            desktop\r\n          }}\r\n        >\r\n          <ConfirmProvider>\r\n            {\r\n              isLoading\r\n                ? <Loading />\r\n                : <NotesContainer />\r\n            }\r\n          </ConfirmProvider>\r\n        </AppContext.Provider>\r\n      </ThemeProvider>\r\n    </>\r\n  )\r\n};\r\n\r\nexport { AppContext, App };\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './containers/App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}