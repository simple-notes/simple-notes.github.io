(this.webpackJsonplibrary=this.webpackJsonplibrary||[]).push([[0],{197:function(e,t,a){e.exports=a(370)},22:function(e){e.exports=JSON.parse('{"a":3,"c":{"url":"https://accounts.google.com/o/oauth2/v2/auth","params":{"client_id":"870430470598-s2kccom1fufpo92g1eupm66dmg92tp9o.apps.googleusercontent.com","redirect_uri":"https://simple-notes.github.io","scope":"https://www.googleapis.com/auth/drive.appdata","response_type":"token"}},"b":"https://www.googleapis.com/"}')},361:function(e,t){},370:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(16),i=a.n(o),l=a(4),s=a.n(l),u=a(11),d=a(22),p=function(){return new Promise((function(e){var t=d.c.url,a=d.c.params;if(a){var n=Object.keys(a).map((function(e){return"".concat(e,"=").concat(a[e])})).join("&");t+="?".concat(n)}var r=window.open(t,"signin","modal"),c=setInterval((function(){r.closed&&(e(),clearInterval(c))}),500)}))},m=function(e){if(e){var t=e.substring(1).split("&").reduce((function(e,t){return e[(t=t.split("="))[0]]=t[1],e}),{}),a=t.error,n=t.access_token;a?window.close():n&&f(n)}window.close()},f=function(e){localStorage.setItem("token",e)},b=function(){return localStorage.getItem("token")},g=a(10),h=a(54),x=a(168),v=a.n(x),w=function e(t,a){var n,r,c,o,i,l,u=arguments;return s.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(3!==(n=u.length>2&&void 0!==u[2]?u[2]:0)){m.next=3;break}throw new Error("Request rejected three times");case 3:if(n+=1,!(r=b())){m.next=31;break}return m.prev=6,c=d.b+t,o={Authorization:"Bearer ".concat(r)},m.next=11,s.a.awrap(v()(Object(g.a)({url:c,headers:o},a)));case 11:return i=m.sent,l=i.data,m.abrupt("return",l);case 16:if(m.prev=16,m.t0=m.catch(6),!m.t0.response||401!==m.t0.response.status){m.next=26;break}return m.next=21,s.a.awrap(p());case 21:return m.next=23,s.a.awrap(e(t,a,n));case 23:return m.abrupt("return",m.sent);case 26:throw new Error(m.t0.message);case 27:case 28:m.next=36;break;case 31:return m.next=33,s.a.awrap(p());case 33:return m.next=35,s.a.awrap(e(t,a,n));case 35:return m.abrupt("return",m.sent);case 36:case 37:case"end":return m.stop()}}),null,null,[[6,16]])},E={},y=function e(t){var a,n,r;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,s.a.awrap(w("drive/v3/files",{method:"get",params:{spaces:"appDataFolder",pageToken:t,fields:"nextPageToken, files(id, name)"}}));case 3:return a=c.sent,n=a.files,r=a.nextPageToken,c.abrupt("return",r?[].concat(Object(h.a)(n),Object(h.a)(e(r))):n);case 9:throw c.prev=9,c.t0=c.catch(0),new Error(c.t0.message);case 12:case 13:case"end":return c.stop()}}),null,null,[[0,9]])},j=function(e,t){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(C(e));case 2:return a.next=4,s.a.awrap(I(E[e],t));case 4:case"end":return a.stop()}}))},O=function(e,t){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(I(E[e],t));case 2:case"end":return a.stop()}}))},k=function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(N(E[e]));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},C=function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.awrap(w("drive/v3/files",{method:"post",data:{mimeType:"application/json",name:e,parents:["appDataFolder"]}}));case 3:t=n.sent,a=t.id,E[e]=a,n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(0),new Error(n.t0.message);case 11:case 12:case"end":return n.stop()}}),null,null,[[0,8]])},I=function(e,t){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.a.awrap(w("upload/drive/v3/files/".concat(e),{method:"patch",data:"string"===typeof t?t:JSON.stringify(t)}));case 3:a.next=8;break;case 5:throw a.prev=5,a.t0=a.catch(0),new Error(a.t0.message);case 8:case 9:case"end":return a.stop()}}),null,null,[[0,5]])},N=function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.awrap(w("drive/v3/files/".concat(e),{method:"get",params:{alt:"media"}}));case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Error(t.t0.message);case 9:case 10:case"end":return t.stop()}}),null,null,[[0,6]])},B=function(e,t){if(t.length<e.length){var a=[t,e];e=a[0],t=a[1]}return e.filter((function(e){return t.includes(e)}))},S=function(e,t){return e.filter((function(e){return!t.includes(e)}))},L=function(e){var t=new RegExp("[a-z\u0430-\u044f\u0451]{".concat(d.a,",}"),"gu");return e.toLowerCase().match(t)||[]},F=function(e,t){t.forEach((function(t){for(var a=0;a<=t.length-d.a;a++)for(var r=t.length;r>=a+d.a;r--){var c=t.slice(a,r);n.indexing[c]?n.indexing[c].includes(e)||n.indexing[c].push(e):n.indexing[c]=[e]}}))},T=function(e,t){t.forEach((function(t){for(var a=0;a<=t.length-d.a;a++)for(var r=t.length;r>=a+d.a;r--){var c=t.slice(a,r);if(n.indexing[c]&&n.indexing[c].includes(e))if(1===n.indexing[c].length)delete n.indexing[c];else{var o=n.indexing[c];o.splice(o.indexOf(e),1),n.indexing[c]=o}}}))},R=function(e,t){t.forEach((function(t){return n.labels[t].notesIds.push(e)}))},z=function(e,t){t.forEach((function(t){var a=n.labels[t].notesIds;a.splice(a.indexOf(e),1),n.labels[t].notesIds=a}))},D=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=n.options.labelsCrtId+1,n.options.labelsCrtId=t,n.labels[t]={id:t,name:e,notesIds:[]},a.next=5,s.a.awrap(O("data",n));case 5:case"end":return a.stop()}}))},P=function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n.labels[e.id]=e,t.next=3,s.a.awrap(O("data",n));case 3:case"end":return t.stop()}}))},A=function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n.labels[e].notesIds.forEach((function(t){var a=n.notes[t].labelsIds;a.splice(a.indexOf(e),1),n.notes[t].labelsIds=a})),delete n.labels[e],t.next=4,s.a.awrap(O("data",n));case 4:case"end":return t.stop()}}))},M=function(e){return e?e.map((function(e){return n.labels[e]})):Object.values(n.labels).filter((function(e){return e.id}))},W=function(e){var t=e.string,a=e.labelsIds;return t.length<d.a&&!a.length?Object.values(n.notes).filter((function(e){return e.id})):H(t,a).map((function(e){return n.notes[e]}))},H=function(e,t){if(!e)return J(t);var a=q(e);return 0!==a.length&&t.length?B(a,J(t)):a},q=function(e){var t=L(e);return 0===t.length?[]:1===t.length?n.indexing[t[0]]||[]:t.map((function(e){return n.indexing[e]||[]})).reduce((function(e,t){return B(e,t)}))},J=function(e){return 1===e.length?n.labels[e[0]].notesIds:e.map((function(e){return n.labels[e].notesIds})).reduce((function(e,t){return B(e,t)}))},Q=a(413),_=a(407),G=a(412),K=a(410),Y=a(411),U=a(409),V=function(e){var t=e.open,a=e.locale,n=e.cancelAction,r=e.mainAction,o=e.secondAction;return c.a.createElement(_.a,{open:t,onClose:n},c.a.createElement(U.a,null,a.title),c.a.createElement(K.a,null,c.a.createElement(Y.a,null,a.text)),c.a.createElement(G.a,null,r?o?c.a.createElement(c.a.Fragment,null,c.a.createElement(Q.a,{onClick:n,color:"primary"},a.cancelBtnText),c.a.createElement(Q.a,{onClick:r,color:"primary"},a.mainBtnText),c.a.createElement(Q.a,{onClick:o,variant:"contained",color:"primary",autoFocus:!0},a.secondBtnText)):c.a.createElement(c.a.Fragment,null,c.a.createElement(Q.a,{onClick:n,color:"primary"},a.cancelBtnText),c.a.createElement(Q.a,{onClick:r,variant:"contained",color:"primary",autoFocus:!0},a.mainBtnText)):c.a.createElement(Q.a,{onClick:n,variant:"contained",color:"primary",autoFocus:!0},"OK")))},X=Object(r.createContext)(null),Z={title:"Confirm action",text:"",cancelBtnText:"Cancel",mainBtnText:"Confirm",secondBtnText:"Do additional action"},$={title:"Deleting note",text:"Do you really want to delete note?",mainBtnText:"Delete"},ee={title:"Empty note",text:"You can't add note without title"},te={title:"Close unsaved note",text:"Do you really want to close note without saving? All changes will be discarded.",cancelBtnText:"Cancel",mainBtnText:"Confirm",secondBtnText:"Save and close"},ae=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(u.a)(a,2),o=n[0],i=n[1],l=Object(r.useState)(Z),s=Object(u.a)(l,2),d=s[0],p=s[1],m=Object(r.useState)(null),f=Object(u.a)(m,2),b=f[0],h=f[1],x=Object(r.useState)(null),v=Object(u.a)(x,2),w=v[0],E=v[1],y=function(){i(!1),h(null),E(null),p(Z)},j=function(){b(),y()};return c.a.createElement(X.Provider,{value:{openConfirmForm:function(e,t,a){e&&p(Object(g.a)({},d,{},e)),t&&h((function(){return t})),a&&E((function(){return a})),i(!0)}}},t,c.a.createElement(V,{open:o,locale:d,cancelAction:y,mainAction:b?j:null,secondAction:w?function(){w(),j()}:null}))},ne=X,re=a(170),ce=a(414),oe=Object(re.a)((function(e){return{progress:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}}})),ie=function(){var e=oe();return c.a.createElement("div",{className:e.progress},c.a.createElement(ce.a,null))},le=a(13),se=a(3),ue=a(185),de=(a(269),a(427)),pe=a(415),me=a(416),fe=a(187),be=a(174),ge=a.n(be),he=a(175),xe=a.n(he),ve=a(173),we=a.n(ve),Ee=Object(re.a)((function(e){return{header:{padding:e.spacing(0,2),display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"space-between"},title:{color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},list:{listStyle:"none",padding:0,margin:0,"& > li:not(:last-child)":{marginBottom:6}},listItem:{width:"100%",padding:"0 6px",display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"space-between"},labelIcon:{padding:9},labelText:Object(g.a)({flexGrow:1},e.typography.body2,{letterSpacing:"normal",margin:e.spacing(0,1)}),labelAction:{width:42,flex:"0 0 auto"},newLabelContainer:{padding:e.spacing(0,2),marginTop:e.spacing(.5),display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"center"},newLabelText:Object(g.a)({flexGrow:1,margin:e.spacing(0,1)},e.typography.body2,{letterSpacing:"normal"}),newLabelButton:{marginLeft:e.spacing(1)},scrollbar:Object(le.a)({maxHeight:"calc(100vh - 144px)"},e.breakpoints.up("sm"),{maxHeight:"calc(100vh - 200px)"})}})),ye=function(e){var t=e.labels,a=e.checkedIds,n=e.toggleCheck,r=e.edit,o=e.toggleEditor,i=e.selectEditedLabel,l=e.editedLabel,s=e.newLabel,u=e.changeName,d=e.createLabel,p=e.updateLabel,m=e.deleteLabel,f=Ee();return c.a.createElement("div",null,c.a.createElement("div",{className:f.header},c.a.createElement(fe.a,{className:f.title},"Labels"),c.a.createElement(pe.a,{edge:"end",size:"small",onClick:o},c.a.createElement(we.a,{fontSize:"small"}))),c.a.createElement(ue.a,{className:f.scrollbar},c.a.createElement("ul",{className:f.list},t.map((function(e){return c.a.createElement("li",{key:e.id,className:f.listItem,onClick:r?i(e):n(e.id)},r?c.a.createElement(pe.a,{color:"primary",className:f.labelIcon,onClick:m(e.id)},c.a.createElement(ge.a,{color:"primary"})):c.a.createElement(de.a,{disableRipple:!0,checked:a.includes(e.id),color:"primary"}),e.id===l.id?c.a.createElement(me.a,{error:l.error,value:l.name,autoFocus:!0,className:f.labelText,onChange:u(e.name)}):c.a.createElement(fe.a,{noWrap:!0,className:f.labelText},e.name),c.a.createElement("div",{className:f.labelAction},e.id===l.id&&c.a.createElement(pe.a,{color:"primary",disabled:l.disabled,className:f.labelIcon,onClick:p},c.a.createElement(xe.a,{color:l.disabled?"disabled":"primary"}))))})))),r&&c.a.createElement("div",{className:f.newLabelContainer},c.a.createElement(me.a,{error:s.error,value:s.name,onChange:u(),className:f.newLabelText}),c.a.createElement(Q.a,{disabled:s.disabled,size:"small",variant:"contained",color:"primary",className:f.newLabelButton,onClick:d},"Add")))},je=function(e){var t=e.open,a=e.checkedIds,n=e.setCheckedIds,o=Object(r.useState)(M()),i=Object(u.a)(o,2),l=i[0],d=i[1],p=Object(r.useState)(!1),m=Object(u.a)(p,2),f=m[0],b=m[1],x=Object(r.useState)({}),v=Object(u.a)(x,2),w=v[0],E=v[1],y=Object(r.useState)({name:"",disabled:!0}),j=Object(u.a)(y,2),O=j[0],k=j[1];Object(r.useEffect)((function(){t||b(!1)}),[t]),Object(r.useEffect)((function(){f||(E({}),k({name:"",disabled:!0}))}),[f]);var C=function(e,t){return(e=e.trim()).length?t&&e===t?{error:!1,disabled:!1}:l.some((function(t){return t.name===e}))?{error:!0,message:"Dublicate",disabled:!0}:{error:!1,disabled:!1}:{error:!0,message:"Only spaces",disabled:!0}};return c.a.createElement(ye,{labels:l,checkedIds:a,toggleCheck:function(e){return function(){var t=a.indexOf(e),r=Object(h.a)(a);-1===t?r.push(e):r.splice(t,1),n(r)}},edit:f,toggleEditor:function(){b(!f)},selectEditedLabel:function(e){return function(){e?e.id!==w.id&&E(Object(g.a)({},e,{disabled:!0})):E({})}},editedLabel:w,newLabel:O,changeName:function(e){return function(t){var a=t.target.value,n=e?w:O,r=e?E:k,c=C(a,e);r(Object(g.a)({},n,{name:a},c))}},createLabel:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(D(O.name));case 2:k({name:"",disabled:!0}),d(M());case 4:case"end":return e.stop()}}))},updateLabel:function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),t.next=3,s.a.awrap(P(w));case 3:d(M());case 4:case"end":return t.stop()}}))},deleteLabel:function(e){return function(t){return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t.stopPropagation(),r.next=3,s.a.awrap(A(e));case 3:d(M()),n(a.filter((function(t){return t!==e})));case 5:case"end":return r.stop()}}))}}})},Oe=a(8),ke=a(422),Ce=a(428),Ie=a(375),Ne=a(423),Be=a(424),Se=a(181),Le=a.n(Se),Fe=a(178),Te=a.n(Fe),Re=a(179),ze=a.n(Re),De=a(180),Pe=a.n(De),Ae=a(418),Me=a(417),We=a(419),He=a(421),qe=a(420),Je=a(429),Qe=a(176),_e=a.n(Qe),Ge=a(177),Ke=new _e.a,Ye=new Ge.Parser,Ue=function(e){var t=Ke.render(e);return Ye.parse(t)},Ve=Object(re.a)((function(e){return{notesContainer:{position:"relative",margin:"auto",maxWidth:1150,paddingTop:56},noteContent:{"& *":{margin:0},"& img":{width:"100%"},"& p":Object(g.a)({},e.typography.body1),"& h1":Object(g.a)({},e.typography.h1),"& h2":Object(g.a)({},e.typography.h2),"& h3":Object(g.a)({},e.typography.h3),"& h4":Object(g.a)({},e.typography.h4),"& h5":Object(g.a)({},e.typography.h5),"& h6":Object(g.a)({},e.typography.h6)}}})),Xe=function(e){var t=e.desktop,a=e.notes,n=e.openEditor,r=e.deleteNote,o=Ve();return c.a.createElement(Me.a,null,c.a.createElement("div",{className:o.notesContainer},c.a.createElement(Ae.a,{container:!0,spacing:t?3:1},a.map((function(e){var t=e.id,a=e.title,i=e.text,l=e.labelsIds;return c.a.createElement(Ae.a,{key:t,item:!0,xs:12,md:6,lg:4},c.a.createElement(We.a,{className:o.note},c.a.createElement(qe.a,null,c.a.createElement("div",null,M(l).map((function(e){var t=e.id,a=e.name;return c.a.createElement(Je.a,{key:t,size:"small",label:a})}))),c.a.createElement(fe.a,{gutterBottom:!0,variant:"h5",component:"h2"},a),c.a.createElement("div",{className:o.noteContent},Ue(i))),c.a.createElement(He.a,null,c.a.createElement(Q.a,{size:"small",color:"primary",onClick:r(t)},"Delete"),c.a.createElement(Q.a,{size:"small",color:"primary",onClick:n(e)},"Edit"))))})))))},Ze=Object(re.a)((function(e){return{toolbar:{display:"flex",flexFlow:"row wrap",justifyContent:"space-between",alignItems:"center",height:56,padding:e.spacing(.5,2)},leftBlock:Object(le.a)({display:"none"},e.breakpoints.up("sm"),{flex:"0 0 120px",display:"flex",justifyContent:"flex-start",paddingLeft:e.spacing(7),marginRight:e.spacing(.5)}),middleBlock:{flex:"1 1 auto",display:"flex",justifyContent:"center"},rightBlock:Object(le.a)({flex:"0 0 auto",display:"flex",marginLeft:e.spacing(.5),justifyContent:"flex-end"},e.breakpoints.up("sm"),{flex:"0 0 120px"}),search:{position:"relative",display:"flex",alignItems:"center",borderRadius:e.shape.borderRadius,backgroundColor:Object(Oe.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Oe.c)(e.palette.common.white,.25)},width:"100%",maxWidth:720,height:38},searchIcon:{width:e.spacing(7),position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},searchRoot:{color:"inherit",width:"100%"},searchInput:{padding:e.spacing(1,1,1,7)},drawerPaper:Object(le.a)({width:256},e.breakpoints.up("sm"),{zIndex:e.zIndex.appBar-1,top:56}),filtersHeader:{height:55,padding:e.spacing(0,2),display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"space-between"},filtersBody:{padding:e.spacing(1,0)},fab:Object(le.a)({position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},e.breakpoints.up("sm"),{bottom:e.spacing(3),right:e.spacing(5)}),unshift:Object(le.a)({},e.breakpoints.up("sm"),{transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:0}),shift:Object(le.a)({},e.breakpoints.up("sm"),{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:256})}})),$e=function(e){var t,a,n=e.desktop,r=e.notes,o=e.drawer,i=e.toggleDrawer,l=e.query,s=e.changeQueryString,u=e.setQueryLabelsIds,d=e.openEditor,p=e.deleteNote,m=Ze();return c.a.createElement(c.a.Fragment,null,c.a.createElement(ke.a,{position:"fixed"},c.a.createElement("div",{className:m.toolbar},c.a.createElement("div",{className:m.leftBlock},c.a.createElement(fe.a,{variant:"h6",noWrap:!0},"Notes")),c.a.createElement("div",{className:m.middleBlock},c.a.createElement("div",{className:m.search},c.a.createElement("div",{className:m.searchIcon},c.a.createElement(Te.a,null)),c.a.createElement(Ie.a,{placeholder:"Search\u2026",classes:{root:m.searchRoot,input:m.searchInput},value:l.string,onChange:s,autoFocus:!0}))),c.a.createElement("div",{className:m.rightBlock},c.a.createElement(pe.a,{edge:"end",color:"inherit",onClick:i},c.a.createElement(ze.a,null))))),c.a.createElement(Ce.a,{classes:{paper:m.drawerPaper},variant:n?"persistent":"temporary",open:o,onClose:i,anchor:"right"},c.a.createElement("div",{className:m.filtersHeader},c.a.createElement(fe.a,{variant:"h6",noWrap:!0},"Filters"),n&&c.a.createElement(pe.a,{edge:"end",color:"inherit",onClick:i},c.a.createElement(Pe.a,null))),c.a.createElement(Ne.a,null),c.a.createElement("div",{className:m.filtersBody},c.a.createElement(je,{open:o,checkedIds:l.labelsIds,setCheckedIds:u}))),c.a.createElement("div",{className:Object(se.a)(m.content,(t={},Object(le.a)(t,m.shift,o),Object(le.a)(t,m.unshift,!o),t))},c.a.createElement(Xe,{notes:r,desktop:n,openEditor:d,deleteNote:p})),c.a.createElement(Be.a,{className:Object(se.a)(m.fab,(a={},Object(le.a)(a,m.shift,o),Object(le.a)(a,m.unshift,!o),a)),color:"primary","aria-label":"add",onClick:d()},c.a.createElement(Le.a,null)))},et=a(100),tt=a(182),at=a.n(tt),nt=a(183),rt=a.n(nt),ct=a(184),ot=a.n(ct),it=Object(re.a)((function(e){return{toolbar:{display:"flex",flexFlow:"row wrap",height:112,padding:e.spacing(.5,2)},leftBlock:{flex:"1 0 0",alignSelf:"flex-start",display:"flex"},rightBlock:{flex:"1 0 0",alignSelf:"flex-start",display:"flex",justifyContent:"flex-end"},titleBlock:{flex:"1 0 100%",paddingBottom:e.spacing(1.5),paddingLeft:e.spacing(7)},note:{padding:e.spacing(17,2,0,2),minHeight:"100vh"},inputRoot:{color:"rgb(255, 255, 255)",fontSize:"1.5rem",lineHeight:1.33,letterSpacing:"0em","&.MuiInput-underline:after":{borderBottomColor:"rgb(255, 255, 255)"},"&.MuiInput-underline:before":{borderBottomColor:"rgba(255, 255, 255, 0.42)"},"&.MuiInput-underline:hover:before":{borderBottomColor:"rgba(255, 255, 255, 0.42)"}},drawerPaper:Object(le.a)({width:256,padding:e.spacing(1,0)},e.breakpoints.up("sm"),{zIndex:e.zIndex.appBar-1,top:112}),fab:Object(le.a)({position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},e.breakpoints.up("sm"),{bottom:e.spacing(3),right:e.spacing(5)+256}),changeModeBtn:{position:"fixed",top:e.spacing(2)+112,right:e.spacing(2)+256}}})),lt=function(e){var t=e.note,a=e.desktop,n=e.drawer,o=e.toggleDrawer,i=e.changeField,l=e.setLabelsIds,s=e.saveNote,u=e.closeNote,d=e.showRendered,p=e.changeRenderedMode,m=Object(r.useRef)(null),f=it();return c.a.createElement(c.a.Fragment,null,c.a.createElement(ke.a,{position:"fixed"},c.a.createElement("div",{className:f.toolbar},c.a.createElement("div",{className:f.leftBlock},c.a.createElement(pe.a,{edge:"start",color:"inherit",onClick:u},c.a.createElement(at.a,null))),c.a.createElement("div",{className:f.rightBlock},!a&&c.a.createElement(pe.a,{edge:"end",color:"inherit",onClick:o},c.a.createElement(rt.a,null))),c.a.createElement("div",{className:f.titleBlock},c.a.createElement(me.a,{fullWidth:!0,classes:{root:f.inputRoot},autoComplete:"off",value:t.title,name:"title",placeholder:"Title",onChange:i})))),c.a.createElement(Ce.a,{classes:{paper:f.drawerPaper},variant:a?"persistent":"temporary",open:!!a||n,onClose:o,anchor:"right"},c.a.createElement(je,{open:n,checkedIds:t.labelsIds,setCheckedIds:l})),c.a.createElement(et.a,{square:!1,elevation:0,className:f.note,onClick:function(){m.current&&m.current.focus()}},d?Ue(t.text):c.a.createElement(Ie.a,{fullWidth:!0,inputRef:m,multiline:!0,autoComplete:"off",value:t.text,name:"text",onChange:i,placeholder:"Content"})),c.a.createElement(Q.a,{className:f.changeModeBtn,variant:"contained",color:"primary",onClick:p},"Mode"),c.a.createElement(Be.a,{className:f.fab,color:"primary","aria-label":"add",onClick:s},c.a.createElement(ot.a,null)))},st=function(e){var t=e.note,a=e.saveNote,n=e.closeEditor,o=Object(r.useContext)(mt).desktop,i=Object(r.useContext)(ne).openConfirmForm,l=Object(r.useState)(!1),s=Object(u.a)(l,2),d=s[0],p=s[1],m=Object(r.useState)(t),f=Object(u.a)(m,2),b=f[0],h=f[1],x=Object(r.useState)(!1),v=Object(u.a)(x,2),w=v[0],E=v[1],y=Object(r.useState)(!1),j=Object(u.a)(y,2),O=j[0],k=j[1];Object(r.useEffect)((function(){h(t)}),[t]);return c.a.createElement(lt,{desktop:o,drawer:d,toggleDrawer:function(){p(!d)},note:b,changeField:function(e){var t=e.target,a=t.name,n=t.value;k(!0),h(Object(g.a)({},b,Object(le.a)({},a,n)))},setLabelsIds:function(e){k(!0),h(Object(g.a)({},b,{labelsIds:e}))},saveNote:function(){b.title?(a(b)(),k(!1)):i(ee)},closeNote:function(){O?i(te,n,a(b)):n()},showRendered:w,changeRenderedMode:function(){E(!w)}})},ut=function(){var e=Object(r.useContext)(mt).desktop,t=Object(r.useContext)(ne).openConfirmForm,a=Object(r.useState)(e),o=Object(u.a)(a,2),i=o[0],l=o[1],s=Object(r.useState)({string:"",labelsIds:[]}),d=Object(u.a)(s,2),p=d[0],m=d[1],f=Object(r.useState)([]),b=Object(u.a)(f,2),h=b[0],x=b[1],v=Object(r.useState)(null),w=Object(u.a)(v,2),E=w[0],y=w[1],j=Object(r.useState)(),k=Object(u.a)(j,2);k[0],k[1];Object(r.useEffect)((function(){x(W(p))}),[p]),Object(r.useEffect)((function(){l(e)}),[e]);var C=function(e){return function(){!function(e){var t=n.notes[e];T(e,L(t.title)),T(e,L(t.text)),z(e,t.labelsIds),delete n.notes[e],O("data",n)}(e),x(W(p))}};return E?c.a.createElement(st,{note:E,saveNote:function(e){return function(){var t;t=e.id?function(e){var t,a,r=!1,c=n.notes[e.id];if(e.title!==c.title){var o=L(c.title),i=L(e.title),l=S(o,i),s=S(i,o);T(e.id,l),F(e.id,s),r=!0}if(e.text!==c.text){var u=L(c.text),d=L(e.text),p=S(u,d),m=S(d,u);T(e.id,p),F(e.id,m),r=!0}if(t=e.labelsIds,a=c.labelsIds,t.length!==a.length||!t.every((function(e){return a.includes(e)}))){var f=S(c.labelsIds,e.labelsIds),b=S(e.labelsIds,c.labelsIds);z(e.id,f),R(e.id,b),r=!0}return r&&(n.notes[e.id]=e,O("data",n)),n.notes[e.id]}(e):function(e){var t=e.labelsIds,a=e.title,r=e.text,c=n.options.notesCrtId+1;return n.options.notesCrtId=c,F(c,L(a)),F(c,L(r)),R(c,t),n.notes[c]=Object(g.a)({id:c},e),O("data",n),n.notes[c]}(e),y(t),x(W(p))}},closeEditor:function(){y(null)}}):c.a.createElement($e,{desktop:e,drawer:i,toggleDrawer:function(){l(!i)},notes:h,query:p,changeQueryString:function(e){var t=e.target.value;m(Object(g.a)({},p,{string:t}))},setQueryLabelsIds:function(e){m(Object(g.a)({},p,{labelsIds:e}))},openEditor:function(e){return function(){y(e=e||{labelsIds:[],title:"",text:""})}},deleteNote:function(e){return function(){t($,C(e))}}})},dt=a(425),pt=a(426),mt=Object(r.createContext)(null);i.a.render(c.a.createElement((function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),d=l[0],p=l[1],f=Object(dt.a)("(min-width:600px)");return Object(r.useEffect)((function(){!function(){var e,t;s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(e=window.location.hash)){a.next=6;break}m(e),a.next=8;break;case 6:return a.next=8,s.a.awrap(s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(y());case 2:e.t0=function(e){var t=e.id,a=e.name;E[a]=t},e.sent.forEach(e.t0);case 4:case"end":return e.stop()}})));case 2:if(t="data",E.hasOwnProperty(t)){e.next=5;break}return e.next=5,s.a.awrap(j("data",{labels:{},notes:{},indexing:{},options:{labelsCrtId:0,notesCrtId:0,version:"0.1.3"}}));case 5:return e.next=8,s.a.awrap(k("data"));case 8:n=e.sent;case 9:case"end":return e.stop()}var t})));case 8:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),t=a.t0.message,p(t);case 15:return a.prev=15,o(!1),a.finish(15);case 18:case 19:case"end":return a.stop()}}),null,null,[[0,11,15,18]])}()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(pt.a,null),c.a.createElement(mt.Provider,{value:{isLoading:a,setIsLoading:o,error:d,setError:p,desktop:f}},c.a.createElement(ae,null,a?c.a.createElement(ie,null):c.a.createElement(ut,null))))}),null),document.getElementById("root"))}},[[197,1,2]]]);
//# sourceMappingURL=main.a7e990a5.chunk.js.map