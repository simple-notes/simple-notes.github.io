{"version":3,"sources":["services/notes.js","services/auth.js","services/fetch.js","services/drive.js","services/sets.js","components/Loading.js","components/Labels.js","containers/LabelsContainer.js","services/markdown-converter.js","components/NoteList.js","components/Notes.js","components/Editor.js","containers/EditorContainer.js","containers/NotesContainer.js","containers/App.js","index.js"],"names":["labelsData","indexingData","notesData","data","signIn","Promise","resolve","url","googleSignInProperties","params","paramString","Object","keys","map","param","join","win","window","open","timer","setInterval","closed","clearInterval","parseHash","hash","substring","split","reduce","store","error","access_token","close","saveToken","token","localStorage","setItem","getToken","getItem","fetch","addUrl","options","a","async","tryCount","Error","googleApiBaseUrl","headers","axios","response","status","message","ids","getFilesList","pageToken","method","spaces","fields","files","nextPageToken","checkFile","fileName","hasOwnProperty","createFile","fileData","createFileMetadata","updateFileContent","updateFile","deleteFiles","fileNameList","all","removeFile","getFile","getFileContent","getFiles","mimeType","name","parents","id","fileId","JSON","stringify","alt","intersection","setA","setB","length","filter","item","includes","difference","initApp","forEach","labels","notes","indexing","labelsCrtId","notesCrtId","version","currentId","parseTextToWords","text","regex","RegExp","MIN_WORD_LENGTH","toLowerCase","match","addWords","noteId","words","word","i","j","wordPart","slice","push","deleteWords","notesIds","splice","indexOf","addLabels","labelsIds","deleteLabels","createLabelData","updateLabelData","label","deleteLabelData","labelId","getLabelsData","values","getNotesData","string","note","getNotesIds","getNotesIdsByLabelsIds","getNotesIdsByString","previous","current","useStyles","makeStyles","theme","progress","width","height","display","justifyContent","alignItems","Loading","classes","className","CircularProgress","header","padding","spacing","flexFlow","title","color","palette","secondary","fontFamily","typography","fontWeight","fontWeightMedium","fontSize","pxToRem","list","listStyle","margin","marginBottom","listItem","labelIcon","labelText","flexGrow","body2","letterSpacing","labelAction","flex","newLabelContainer","marginTop","newLabelText","newLabelButton","marginLeft","scrollbar","maxHeight","breakpoints","up","Labels","checkedIds","toggleCheck","edit","toggleEditor","selectEditedLabel","editedLabel","newLabel","changeName","createLabel","updateLabel","deleteLabel","Typography","IconButton","edge","size","onClick","key","Checkbox","disableRipple","checked","Input","value","autoFocus","onChange","noWrap","disabled","Button","variant","LabelsContainer","setCheckedIds","useState","setLabels","setEdit","setEditedLabel","setNewLabel","useEffect","validateName","newName","originalName","trim","some","index","newCheckedIds","target","currentLabel","currentSetMethod","validateResult","event","stopPropagation","checkedId","markdownParser","MarkdownIt","htmlToReactParser","HtmlToReactParser","toReactElement","markdown","htmlRaw","render","parse","notesContainer","position","maxWidth","paddingTop","NoteList","desktop","openEditor","deleteNote","Container","Grid","container","xs","md","lg","Card","CardContent","noteContent","Chip","gutterBottom","component","MarkdownConverter","CardActions","toolbar","leftBlock","paddingLeft","marginRight","middleBlock","rightBlock","search","borderRadius","shape","backgroundColor","fade","common","white","searchIcon","pointerEvents","searchRoot","searchInput","drawerPaper","zIndex","appBar","top","filtersHeader","filtersBody","fab","bottom","right","unshift","transition","transitions","create","easing","sharp","duration","leavingScreen","shift","easeOut","enteringScreen","Notes","drawer","toggleDrawer","query","changeQueryString","setQueryLabelsIds","AppBar","InputBase","placeholder","root","input","Drawer","paper","onClose","anchor","Divider","clsx","content","Fab","aria-label","alignSelf","titleBlock","paddingBottom","minHeight","inputRoot","lineHeight","borderBottomColor","changeModeBtn","Editor","changeField","setLabelsIds","saveNote","closeNote","showRendered","changeRenderedMode","inputBody","useRef","fullWidth","autoComplete","Paper","square","elevation","focus","inputRef","multiline","EditorContainer","closeEditor","useContext","AppContext","setDrawer","editedNote","setEditedNote","setShowRendered","NotesContainer","setQuery","setNotes","setNote","newNoteData","changedNote","isChanged","oldNote","oldWords","newWords","deletedWords","addedWords","every","deletedLabels","addedLabels","updateNoteData","createNoteData","deleteNoteData","createContext","ReactDOM","isLoading","setIsLoading","setError","useMediaQuery","location","init","CssBaseline","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.5af2b261.chunk.js","sourcesContent":["import { initDrive, checkFile, getFile, getFiles, createFile, updateFile, deleteFiles } from './drive';\r\nimport { intersection, difference, compare } from './sets';\r\nimport { MIN_WORD_LENGTH } from '../config';\r\n\r\nlet labelsData;\r\nlet indexingData;\r\nlet notesData;\r\nlet data;\r\n\r\nexport const initApp = async () => {\r\n  await initDrive();\r\n  if (!checkFile('notesData')) {\r\n    if (!checkFile('data')) {\r\n      await createFile('data', {\r\n        labels: {},\r\n        notes: {},\r\n        indexing: {},\r\n        options: {\r\n          labelsCrtId: 0,\r\n          notesCrtId: 0,\r\n          version: \"0.1.3\"\r\n        }\r\n      });\r\n    };\r\n  } else {\r\n    [labelsData, notesData, indexingData] = await getFiles(['labelsData', 'notesData', 'indexingData']);\r\n    data = {};\r\n    data.options = {\r\n      labelsCrtId: labelsData.currentId,\r\n      notesCrtId: notesData.currentId,\r\n      version: \"0.1.3\"\r\n    };\r\n    delete labelsData.currentId;\r\n    data.labels = labelsData;\r\n    delete notesData.currentId;\r\n    data.notes = notesData;\r\n    data.indexing = indexingData;\r\n    await createFile('data', data);\r\n    await deleteFiles(['labelsData', 'notesData', 'indexingData', 'options']);\r\n  };\r\n  data = await getFile('data');\r\n};\r\n\r\nexport const createNoteData = (note) => {\r\n  const { labelsIds, title, text } = note;\r\n  const id = data.options.notesCrtId + 1;\r\n  data.options.notesCrtId = id;\r\n  addWords(id, parseTextToWords(title));\r\n  addWords(id, parseTextToWords(text));\r\n  addLabels(id, labelsIds);\r\n  data.notes[id] = { id: id, ...note };\r\n  updateFile('data', data);\r\n  return data.notes[id];\r\n};\r\n\r\nexport const deleteNoteData = (id) => {\r\n  const note = data.notes[id];\r\n  deleteWords(id, parseTextToWords(note.title));\r\n  deleteWords(id, parseTextToWords(note.text));\r\n  deleteLabels(id, note.labelsIds);\r\n  delete data.notes[id];\r\n  updateFile('data', data);\r\n};\r\n\r\nexport const updateNoteData = (changedNote) => {\r\n  let isChanged = false;\r\n  const oldNote = data.notes[changedNote.id];\r\n\r\n  if (changedNote.title !== oldNote.title) {\r\n    const oldWords = parseTextToWords(oldNote.title);\r\n    const newWords = parseTextToWords(changedNote.title);\r\n    const deletedWords = difference(oldWords, newWords);\r\n    const addedWords = difference(newWords, oldWords);\r\n    deleteWords(changedNote.id, deletedWords);\r\n    addWords(changedNote.id, addedWords);\r\n    isChanged = true;\r\n  };\r\n\r\n  if (changedNote.text !== oldNote.text) {\r\n    const oldWords = parseTextToWords(oldNote.text);\r\n    const newWords = parseTextToWords(changedNote.text);\r\n    const deletedWords = difference(oldWords, newWords);\r\n    const addedWords = difference(newWords, oldWords);\r\n    deleteWords(changedNote.id, deletedWords);\r\n    addWords(changedNote.id, addedWords);\r\n    isChanged = true;\r\n  };\r\n\r\n  if (!compare(changedNote.labelsIds, oldNote.labelsIds)) {\r\n    const deletedLabels = difference(oldNote.labelsIds, changedNote.labelsIds);\r\n    const addedLabels = difference(changedNote.labelsIds, oldNote.labelsIds);\r\n    deleteLabels(changedNote.id, deletedLabels);\r\n    addLabels(changedNote.id, addedLabels);\r\n    isChanged = true;\r\n  };\r\n\r\n  if (isChanged) {\r\n    data.notes[changedNote.id] = changedNote;\r\n    updateFile('data', data);\r\n  };\r\n\r\n  return data.notes[changedNote.id];\r\n};\r\n\r\nconst parseTextToWords = (text) => {\r\n  const regex = new RegExp(`[a-zа-яё]{${MIN_WORD_LENGTH},}`, 'gu');\r\n  return text.toLowerCase().match(regex) || [];\r\n};\r\n\r\nconst addWords = (noteId, words) => {\r\n  words.forEach(word => {\r\n    for (let i = 0; i <= word.length - MIN_WORD_LENGTH; i++) {\r\n      for (let j = word.length; j >= i + MIN_WORD_LENGTH; j--) {\r\n        const wordPart = word.slice(i, j);\r\n        if (!data.indexing[wordPart]) {\r\n          data.indexing[wordPart] = [noteId];\r\n        } else {\r\n          if (!data.indexing[wordPart].includes(noteId)) {\r\n            data.indexing[wordPart].push(noteId);\r\n          };\r\n        };\r\n      };\r\n    };\r\n  });\r\n};\r\n\r\nconst deleteWords = (noteId, words) => {\r\n  words.forEach(word => {\r\n    for (let i = 0; i <= word.length - MIN_WORD_LENGTH; i++) {\r\n      for (let j = word.length; j >= i + MIN_WORD_LENGTH; j--) {\r\n        const wordPart = word.slice(i, j);\r\n        if (data.indexing[wordPart] && data.indexing[wordPart].includes(noteId)) {\r\n          if (data.indexing[wordPart].length === 1) {\r\n            delete data.indexing[wordPart];\r\n          } else {\r\n            const notesIds = data.indexing[wordPart];\r\n            notesIds.splice(notesIds.indexOf(noteId), 1);\r\n            data.indexing[wordPart] = notesIds;\r\n          };\r\n        };\r\n      };\r\n    };\r\n  });\r\n};\r\n\r\nconst addLabels = (noteId, labelsIds) => {\r\n  labelsIds.forEach(id => data.labels[id].notesIds.push(noteId));\r\n};\r\n\r\nconst deleteLabels = (noteId, labelsIds) => {\r\n  labelsIds.forEach(id => {\r\n    const notesIds = data.labels[id].notesIds;\r\n    notesIds.splice(notesIds.indexOf(noteId), 1);\r\n    data.labels[id].notesIds = notesIds;\r\n  });\r\n};\r\n\r\nexport const createLabelData = async (name) => {\r\n  const id = data.options.labelsCrtId + 1;\r\n  data.options.labelsCrtId = id;\r\n  data.labels[id] = {\r\n    id: id,\r\n    name: name,\r\n    notesIds: []\r\n  };\r\n  await updateFile('data', data);\r\n};\r\n\r\nexport const updateLabelData = async (label) => {\r\n  data.labels[label.id] = label;\r\n  await updateFile('data', data);\r\n};\r\n\r\nexport const deleteLabelData = async (labelId) => {\r\n  data.labels[labelId].notesIds.forEach((id) => {\r\n    const { labelsIds } = data.notes[id];\r\n    labelsIds.splice(labelsIds.indexOf(labelId), 1);\r\n    data.notes[id].labelsIds = labelsIds;\r\n  });\r\n  delete data.labels[labelId];\r\n  await updateFile('data', data);\r\n};\r\n\r\nexport const getLabelsData = (labelsIds) => {\r\n  if (labelsIds) {\r\n    return labelsIds.map(id => data.labels[id]);\r\n  };\r\n  return Object.values(data.labels).filter(label => label.id);\r\n};\r\n\r\nexport const getNotesData = ({ string, labelsIds }) => {\r\n  if (string.length < MIN_WORD_LENGTH && !labelsIds.length) {\r\n    return Object.values(data.notes).filter(note => note.id);\r\n  };\r\n  return getNotesIds(string, labelsIds).map(id => data.notes[id]);\r\n};\r\n\r\nconst getNotesIds = (string, labelsIds) => {\r\n  if (!string) {\r\n    return getNotesIdsByLabelsIds(labelsIds);\r\n  };\r\n  let ids = getNotesIdsByString(string);\r\n  if (ids.length === 0 || !labelsIds.length) {\r\n    return ids;\r\n  };\r\n  return intersection(ids, getNotesIdsByLabelsIds(labelsIds));\r\n};\r\n\r\nconst getNotesIdsByString = (string) => {\r\n  const words = parseTextToWords(string);\r\n  if (words.length === 0) {\r\n    return [];\r\n  };\r\n  if (words.length === 1) {\r\n    return data.indexing[words[0]] || [];\r\n  };\r\n  return words\r\n    .map(word => data.indexing[word] || [])\r\n    .reduce((previous, current) => intersection(previous, current));\r\n};\r\n\r\nconst getNotesIdsByLabelsIds = (labelsIds) => {\r\n  if (labelsIds.length === 1) {\r\n    return data.labels[labelsIds[0]].notesIds;\r\n  };\r\n  return labelsIds\r\n    .map(id => data.labels[id].notesIds)\r\n    .reduce((previous, current) => intersection(previous, current));\r\n};\r\n","import { googleSignInProperties } from '../config';\r\n\r\nexport const signIn = () => {\r\n  return new Promise((resolve) => {\r\n    let { url, params } = googleSignInProperties;\r\n    if (params) {\r\n      const paramString = Object.keys(params)\r\n        .map(param => `${param}=${params[param]}`)\r\n        .join('&');\r\n      url += `?${paramString}`;\r\n    };\r\n    const win = window.open(url, 'signin', 'modal');\r\n    const timer = setInterval(() => {\r\n      if (!win.closed) {\r\n        return;\r\n      };\r\n      resolve();\r\n      clearInterval(timer);\r\n    }, 500);\r\n  });\r\n};\r\n\r\nexport const parseHash = (hash) => {\r\n  if (hash) {\r\n    const { error, access_token } = hash\r\n      .substring(1)\r\n      .split('&')\r\n      .reduce((store, param) => {\r\n        param = param.split('=');\r\n        store[param[0]] = param[1];\r\n        return store;\r\n      }, {});\r\n    if (error) {\r\n      window.close();\r\n    } else if (access_token) {\r\n      saveToken(access_token);\r\n    };\r\n  };\r\n  window.close();\r\n};\r\n\r\nconst saveToken = token => {\r\n  localStorage.setItem('token', token);\r\n};\r\n\r\nexport const getToken = () => {\r\n  return localStorage.getItem('token');\r\n};\r\n","import axios from 'axios';\r\nimport { getToken, signIn } from './auth';\r\nimport { googleApiBaseUrl } from '../config';\r\nexport const fetch = async (addUrl, options, tryCount = 0) => {\r\n  if (tryCount === 3) {\r\n    throw new Error('Request rejected three times');\r\n  } \r\n  tryCount += 1;\r\n  const token = getToken();\r\n  if (token) {\r\n    try {\r\n      const url = googleApiBaseUrl + addUrl;\r\n      const headers = {\r\n        'Authorization': `Bearer ${token}`\r\n      };\r\n      const { data } = await axios({\r\n        url,\r\n        headers,\r\n        ...options\r\n      });\r\n      return data;\r\n    } catch (err) {\r\n      if (err.response && err.response.status === 401) {\r\n        await signIn();\r\n        return await fetch(addUrl, options, tryCount);\r\n      } else {\r\n        throw new Error(err.message);\r\n      };\r\n    };\r\n  } else {\r\n    await signIn();\r\n    return await fetch(addUrl, options, tryCount);\r\n  };\r\n};\r\n","import { fetch } from './fetch';\r\n\r\nlet ids = {};\r\n\r\nexport const initDrive = async () => {\r\n  (await getFilesList())\r\n    .forEach(({ id, name }) => {\r\n      ids[name] = id;\r\n    });\r\n};\r\n\r\n\r\nconst getFilesList = async (pageToken) => {\r\n  try {\r\n    const { files, nextPageToken } = await fetch('drive/v3/files', {\r\n      method: 'get',\r\n      params: {\r\n        spaces: 'appDataFolder',\r\n        pageToken: pageToken,\r\n        fields: 'nextPageToken, files(id, name)'\r\n      }\r\n    });\r\n    return (nextPageToken)\r\n      ? [...files, ...getFilesList(nextPageToken)]\r\n      : files;\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nexport const checkFile = (fileName) => {\r\n  return ids.hasOwnProperty(fileName);\r\n};\r\n\r\nexport const checkFiles = (fileNameList) => {\r\n  return fileNameList.every(name => ids.hasOwnProperty(name));\r\n};\r\n\r\nexport const createFile = async (fileName, fileData) => {\r\n  await createFileMetadata(fileName);\r\n  await updateFileContent(ids[fileName], fileData);\r\n};\r\n\r\nexport const createFiles = async (fileList) => {\r\n  await Promise.all(fileList\r\n    .map(async ({ name }) => await createFileMetadata(name))\r\n  );\r\n  await updateFiles(fileList);\r\n};\r\n\r\nexport const updateFile = async (fileName, fileData) => {\r\n  await updateFileContent(ids[fileName], fileData);\r\n};\r\n\r\nexport const updateFiles = async (fileList) => {\r\n  await Promise.all(fileList\r\n    .map(async ({ name, data }) => await updateFileContent(ids[name], data))\r\n  );\r\n};\r\n\r\nexport const deleteFile = async (fileName) => {\r\n  await removeFile(ids[fileName]);\r\n};\r\n\r\nexport const deleteFiles = async (fileNameList) => {\r\n  await Promise.all(fileNameList\r\n    .map(async fileName => await removeFile(ids[fileName]))\r\n  );\r\n};\r\n\r\nexport const getFile = async (fileName) => {\r\n  return await getFileContent(ids[fileName]);\r\n};\r\n\r\nexport const getFiles = async (fileNameList) => {\r\n  return await Promise.all(\r\n    fileNameList.map(async fileName => await getFile(fileName))\r\n  );\r\n};\r\n\r\nconst createFileMetadata = async (fileName) => {\r\n  try {\r\n    const { id } = await fetch('drive/v3/files', {\r\n      method: 'post',\r\n      data: {\r\n        mimeType: 'application/json',\r\n        name: fileName,\r\n        parents: ['appDataFolder']\r\n      }\r\n    });\r\n    ids[fileName] = id;\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nconst updateFileContent = async (fileId, fileData) => {\r\n  try {\r\n    await fetch(`upload/drive/v3/files/${fileId}`, {\r\n      method: 'patch',\r\n      data: (typeof fileData === 'string')\r\n        ? fileData\r\n        : JSON.stringify(fileData)\r\n    });\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nconst removeFile = async (fileId) => {\r\n  try {\r\n    await fetch(`drive/v3/files/${fileId}`, {\r\n      method: 'delete'\r\n    });\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\nconst getFileContent = async (fileId) => {\r\n  try {\r\n    return await fetch(`drive/v3/files/${fileId}`, {\r\n      method: 'get',\r\n      params: {\r\n        alt: 'media'\r\n      }\r\n    });\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  };\r\n};\r\n\r\n//For tests and debugging\r\nexport const deleteAllData = async () => {\r\n  await Promise.all(\r\n    (await getFilesList())\r\n      .map(async ({ id }) => await removeFile(id))\r\n  );\r\n};\r\n","export const intersection = (setA, setB) => {\r\n  if (setB.length < setA.length) {\r\n    [setA, setB] = [setB, setA];\r\n  };\r\n  return setA.filter(item => setB.includes(item));\r\n};\r\n\r\nexport const difference = (setA, setB) => {\r\n  return setA.filter(item => !setB.includes(item));\r\n};\r\n\r\n//Not universal. Only for this task. Is correctly if each set dont have duplicates\r\nexport const compare = (setA, setB) => {\r\n  if (setA.length !== setB.length) {\r\n    return false;\r\n  };\r\n  return setA.every(item => setB.includes(item));\r\n};\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  progress: {\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  }\r\n}));\r\n\r\nconst Loading = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.progress}>\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n  handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport SimpleBar from 'simplebar-react';\r\nimport 'simplebar/dist/simplebar.min.css';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Input from '@material-ui/core/Input';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DeleteRoundedIcon from \"@material-ui/icons/DeleteRounded\";\r\nimport DoneRoundedIcon from '@material-ui/icons/DoneRounded';\r\nimport EditRoundedIcon from \"@material-ui/icons/EditRounded\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  header: {\r\n    padding: theme.spacing(0, 2),\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  title: {\r\n    color: theme.palette.text.secondary,\r\n    fontFamily: theme.typography.fontFamily,\r\n    fontWeight: theme.typography.fontWeightMedium,\r\n    fontSize: theme.typography.pxToRem(14)\r\n  },\r\n  list: {\r\n    listStyle: \"none\",\r\n    padding: 0,\r\n    margin: 0,\r\n    \"& > li:not(:last-child)\": {\r\n      marginBottom: 6\r\n    }\r\n  },\r\n  listItem: {\r\n    width: \"100%\",\r\n    padding: \"0 6px\",\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  labelIcon: {\r\n    padding: 9\r\n  },\r\n  labelText: {\r\n    flexGrow: 1,\r\n    ...theme.typography.body2,\r\n    letterSpacing: \"normal\",\r\n    margin: theme.spacing(0, 1)\r\n  },\r\n  labelAction: {\r\n    width: 42,\r\n    flex: \"0 0 auto\"\r\n  },\r\n  newLabelContainer: {\r\n    padding: theme.spacing(0, 2),\r\n    marginTop: theme.spacing(0.5),\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  newLabelText: {\r\n    flexGrow: 1,\r\n    margin: theme.spacing(0, 1),\r\n    ...theme.typography.body2,\r\n    letterSpacing: \"normal\"\r\n  },\r\n  newLabelButton: {\r\n    marginLeft: theme.spacing(1)\r\n  },\r\n  scrollbar: {\r\n    maxHeight: \"calc(100vh - 144px)\",\r\n    [theme.breakpoints.up('sm')]: {\r\n      maxHeight: \"calc(100vh - 200px)\"\r\n    }\r\n  }\r\n}));\r\n\r\nconst Labels = ({\r\n  labels,\r\n  checkedIds,\r\n  toggleCheck,\r\n  edit,\r\n  toggleEditor,\r\n  selectEditedLabel,\r\n  editedLabel,\r\n  newLabel,\r\n  changeName,\r\n  createLabel,\r\n  updateLabel,\r\n  deleteLabel\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.header}>\r\n        <Typography className={classes.title}>\r\n          Labels\r\n        </Typography>\r\n        <IconButton edge=\"end\" size=\"small\" onClick={toggleEditor}>\r\n          <EditRoundedIcon fontSize=\"small\" />\r\n        </IconButton>\r\n      </div>\r\n      <SimpleBar className={classes.scrollbar}>\r\n        <ul className={classes.list}>\r\n          {\r\n            labels.map((label) => {\r\n              return (\r\n                <li\r\n                  key={label.id}\r\n                  className={classes.listItem}\r\n                  onClick={edit ? selectEditedLabel(label) : toggleCheck(label.id)}\r\n                >\r\n                  {\r\n                    edit\r\n                      ? (\r\n                        <IconButton\r\n                          color=\"primary\"\r\n                          className={classes.labelIcon}\r\n                          onClick={deleteLabel(label.id)}\r\n                        >\r\n                          <DeleteRoundedIcon color=\"primary\" />\r\n                        </IconButton >\r\n                      )\r\n                      : (\r\n                        <Checkbox\r\n                          disableRipple\r\n                          checked={checkedIds.includes(label.id)}\r\n                          color=\"primary\"\r\n                        />\r\n                      )\r\n                  }\r\n                  {\r\n                    label.id === editedLabel.id\r\n                      ? (\r\n                        <Input\r\n                          error={editedLabel.error}\r\n                          value={editedLabel.name}\r\n                          autoFocus\r\n                          className={classes.labelText}\r\n                          onChange={changeName(label.name)}\r\n                        />\r\n                      )\r\n                      : (\r\n                        <Typography\r\n                          noWrap\r\n                          className={classes.labelText}\r\n                        >\r\n                          {label.name}\r\n                        </Typography>\r\n                      )\r\n                  }\r\n                  <div className={classes.labelAction}>\r\n                    {\r\n                      label.id === editedLabel.id && (\r\n                        <IconButton\r\n                          color=\"primary\"\r\n                          disabled={editedLabel.disabled}\r\n                          className={classes.labelIcon}\r\n                          onClick={updateLabel}\r\n                        >\r\n                          <DoneRoundedIcon color={editedLabel.disabled ? \"disabled\" : \"primary\"} />\r\n                        </IconButton>\r\n                      )\r\n                    }\r\n                  </div>\r\n                </li >\r\n              );\r\n            })\r\n          }\r\n        </ul>\r\n      </SimpleBar>\r\n      {\r\n        edit && (\r\n          <div className={classes.newLabelContainer}>\r\n            <Input\r\n              error={newLabel.error}\r\n              value={newLabel.name}\r\n              onChange={changeName()}\r\n              className={classes.newLabelText}\r\n            />\r\n            <Button\r\n              disabled={newLabel.disabled}\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.newLabelButton}\r\n              onClick={createLabel}\r\n            >\r\n              Add\r\n            </Button>\r\n          </div>\r\n        )\r\n      }\r\n    </div >\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n  handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Labels;\r\n","import React, { useState, useEffect } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { getLabelsData, createLabelData, updateLabelData, deleteLabelData } from '../services/notes';\r\nimport Labels from '../components/Labels';\r\n\r\nconst LabelsContainer = ({ open, checkedIds, setCheckedIds }) => {\r\n  const [labels, setLabels] = useState(getLabelsData());\r\n  const [edit, setEdit] = useState(false);\r\n  const [editedLabel, setEditedLabel] = useState({});\r\n  const [newLabel, setNewLabel] = useState({ name: '', disabled: true });\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setEdit(false);\r\n    };\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    if (!edit) {\r\n      setEditedLabel({});\r\n      setNewLabel({ name: '', disabled: true });\r\n    }\r\n  }, [edit]);\r\n\r\n  const toggleCheck = (id) => () => {\r\n    const index = checkedIds.indexOf(id);\r\n    const newCheckedIds = [...checkedIds];\r\n    if (index === -1) {\r\n      newCheckedIds.push(id);\r\n    } else {\r\n      newCheckedIds.splice(index, 1);\r\n    };\r\n    setCheckedIds(newCheckedIds);\r\n  };\r\n\r\n  const toggleEditor = () => {\r\n    setEdit(!edit);\r\n  };\r\n\r\n  const selectEditedLabel = (label) => () => {\r\n    if (label) {\r\n      if (label.id !== editedLabel.id) {\r\n        setEditedLabel({ ...label, disabled: true });\r\n      };\r\n    } else {\r\n      setEditedLabel({});\r\n    };\r\n  };\r\n\r\n  const createLabel = async () => {\r\n    await createLabelData(newLabel.name);\r\n    setNewLabel({ name: '', disabled: true });\r\n    setLabels(getLabelsData());\r\n  };\r\n\r\n  const updateLabel = async (event) => {\r\n    event.stopPropagation();\r\n    await updateLabelData(editedLabel);\r\n    setLabels(getLabelsData());\r\n  };\r\n\r\n  const deleteLabel = (id) => async (event) => {\r\n    event.stopPropagation();\r\n    await deleteLabelData(id);\r\n    setLabels(getLabelsData());\r\n    setCheckedIds(checkedIds.filter(checkedId => checkedId !== id));\r\n  };\r\n\r\n  const changeName = (originalName) => ({ target: { value } }) => {\r\n    const currentLabel = originalName ? editedLabel : newLabel;\r\n    const currentSetMethod = originalName ? setEditedLabel : setNewLabel;\r\n    const validateResult = validateName(value, originalName);\r\n    currentSetMethod({ ...currentLabel, name: value, ...validateResult });\r\n  };\r\n\r\n  const validateName = (newName, originalName) => {\r\n    newName = newName.trim();\r\n\r\n    if (!newName.length) {\r\n      return { error: true, message: \"Only spaces\", disabled: true };\r\n    };\r\n\r\n    if (originalName && newName === originalName) {\r\n      return { error: false, disabled: false };\r\n    };\r\n\r\n    const dublicate = labels.some(({ name }) => name === newName);\r\n    if (dublicate) {\r\n      return { error: true, message: \"Dublicate\", disabled: true };\r\n    } else {\r\n      return { error: false, disabled: false };\r\n    };\r\n  };\r\n\r\n  return (\r\n    <Labels\r\n      labels={labels}\r\n      checkedIds={checkedIds}\r\n      toggleCheck={toggleCheck}\r\n      edit={edit}\r\n      toggleEditor={toggleEditor}\r\n      selectEditedLabel={selectEditedLabel}\r\n      editedLabel={editedLabel}\r\n      newLabel={newLabel}\r\n      changeName={changeName}\r\n      createLabel={createLabel}\r\n      updateLabel={updateLabel}\r\n      deleteLabel={deleteLabel}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LabelsContainer;\r\n","import MarkdownIt from 'markdown-it';\r\nimport { Parser as HtmlToReactParser } from 'html-to-react';\r\n\r\nconst markdownParser = new MarkdownIt();\r\nconst htmlToReactParser = new HtmlToReactParser();\r\n\r\nexport const toReactElement = (markdown) => {\r\n  const htmlRaw = markdownParser.render(markdown);\r\n  const reactElement =  htmlToReactParser.parse(htmlRaw);\r\n\r\n  return reactElement;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { getLabelsData } from '../services/notes';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport * as MarkdownConverter from '../services/markdown-converter';\r\n\r\nconst useStyles = makeStyles(theme => {\r\n  return ({\r\n    notesContainer: {\r\n      position: 'relative',\r\n      margin: \"auto\",\r\n      maxWidth: 1150,\r\n      paddingTop: 56\r\n    }\r\n  })\r\n});\r\n\r\nconst NoteList = ({ desktop, notes, openEditor, deleteNote }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container>\r\n      <div className={classes.notesContainer}>\r\n        <Grid container spacing={desktop ? 3 : 1}>\r\n          {\r\n            notes.map(note => {\r\n              const { id, title, text, labelsIds } = note;\r\n              return (\r\n                <Grid key={id} item xs={12} md={6} lg={4}>\r\n                  <Card className={classes.note}>\r\n                    <CardContent className={classes.noteContent}>\r\n                      <div>\r\n                        {\r\n                          getLabelsData(labelsIds).map(({ id, name }) => {\r\n                            return (\r\n                              <Chip\r\n                                key={id}\r\n                                size={\"small\"}\r\n                                label={name}\r\n                              />\r\n                            )\r\n                          })\r\n                        }\r\n                      </div>\r\n\r\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                        {title}\r\n                      </Typography>\r\n\r\n                      {MarkdownConverter.toReactElement(text)}\r\n                    </CardContent>\r\n\r\n                    <CardActions>\r\n                      <Button size=\"small\" color=\"primary\"\r\n                        onClick={deleteNote(id)}\r\n                      >\r\n                        {\"Delete\"}\r\n                      </Button>\r\n\r\n                      <Button size=\"small\" color=\"primary\"\r\n                        onClick={openEditor(note)}\r\n                      >\r\n                        {\"Edit\"}\r\n                      </Button>\r\n                    </CardActions>\r\n                  </Card>\r\n                </Grid>\r\n              );\r\n            })\r\n          }\r\n        </Grid>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nNoteList.propTypes = {\r\n  children: PropTypes.arrayOf(PropTypes.element)\r\n};\r\n\r\nexport default NoteList;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport LabelsContainer from '../containers/LabelsContainer';\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddRoundedIcon from '@material-ui/icons/AddRounded';\r\nimport SearchRoundedIcon from '@material-ui/icons/SearchRounded';\r\nimport FilterListRoundedIcon from '@material-ui/icons/FilterListRounded';\r\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\r\nimport NoteList from './NoteList';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  toolbar: {\r\n    display: \"flex\",\r\n    flexFlow: \"row wrap\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    height: 56,\r\n    padding: theme.spacing(0.5, 2)\r\n  },\r\n  leftBlock: {\r\n    display: \"none\",\r\n    [theme.breakpoints.up('sm')]: {\r\n      flex: \"0 0 120px\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      paddingLeft: theme.spacing(7),\r\n      marginRight: theme.spacing(0.5)\r\n    }\r\n  },\r\n  middleBlock: {\r\n    flex: \"1 1 auto\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\"\r\n  },\r\n  rightBlock: {\r\n    flex: \"0 0 auto\",\r\n    display: \"flex\",\r\n    marginLeft: theme.spacing(0.5),\r\n    justifyContent: \"flex-end\",\r\n    [theme.breakpoints.up('sm')]: {\r\n      flex: \"0 0 120px\"\r\n    }\r\n  },\r\n  search: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    \"&:hover\": {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25)\r\n    },\r\n    width: \"100%\",\r\n    maxWidth: 720,\r\n    height: 38\r\n  },\r\n  searchIcon: {\r\n    width: theme.spacing(7),\r\n    position: \"absolute\",\r\n    pointerEvents: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  searchRoot: {\r\n    color: \"inherit\",\r\n    width: \"100%\"\r\n  },\r\n  searchInput: {\r\n    padding: theme.spacing(1, 1, 1, 7)\r\n  },\r\n  drawerPaper: {\r\n    width: 256,\r\n    [theme.breakpoints.up('sm')]: {\r\n      zIndex: theme.zIndex.appBar - 1,\r\n      top: 56\r\n    }\r\n  },\r\n  filtersHeader: {\r\n    height: 55,\r\n    padding: theme.spacing(0, 2),\r\n    display: \"flex\",\r\n    flexFlow: \"row nowrap\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  filtersBody: {\r\n    padding: theme.spacing(1, 0)\r\n  },\r\n  fab: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      bottom: theme.spacing(3),\r\n      right: theme.spacing(5),\r\n    }\r\n  },\r\n  unshift: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n      }),\r\n      marginRight: 0\r\n    }\r\n  },\r\n  shift: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.easeOut,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n      }),\r\n      marginRight: 256\r\n    }\r\n  }\r\n}));\r\n\r\nconst Notes = ({\r\n  desktop,\r\n  notes,\r\n  drawer,\r\n  toggleDrawer,\r\n  query,\r\n  changeQueryString,\r\n  setQueryLabelsIds,\r\n  openEditor,\r\n  deleteNote\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <AppBar position=\"fixed\">\r\n        <div className={classes.toolbar}>\r\n          <div className={classes.leftBlock}>\r\n            <Typography variant=\"h6\" noWrap>\r\n              Notes\r\n            </Typography>\r\n          </div>\r\n          <div className={classes.middleBlock}>\r\n            <div className={classes.search}>\r\n              <div className={classes.searchIcon}>\r\n                <SearchRoundedIcon />\r\n              </div>\r\n              <InputBase\r\n                placeholder=\"Search…\"\r\n                classes={{\r\n                  root: classes.searchRoot,\r\n                  input: classes.searchInput\r\n                }}\r\n                value={query.string}\r\n                onChange={changeQueryString}\r\n                autoFocus\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className={classes.rightBlock}>\r\n            <IconButton edge=\"end\" color=\"inherit\" onClick={toggleDrawer}>\r\n              <FilterListRoundedIcon />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n      </AppBar>\r\n      <Drawer\r\n        classes={{\r\n          paper: classes.drawerPaper\r\n        }}\r\n        variant={desktop ? \"persistent\" : \"temporary\"}\r\n        open={drawer}\r\n        onClose={toggleDrawer}\r\n        anchor=\"right\"\r\n      >\r\n        <div className={classes.filtersHeader}>\r\n          <Typography variant=\"h6\" noWrap>\r\n            Filters\r\n            </Typography>\r\n          {\r\n            desktop &&\r\n            <IconButton edge=\"end\" color=\"inherit\" onClick={toggleDrawer}>\r\n              <CloseRoundedIcon />\r\n            </IconButton>\r\n          }\r\n        </div>\r\n        <Divider />\r\n        <div className={classes.filtersBody}>\r\n          <LabelsContainer\r\n            open={drawer}\r\n            checkedIds={query.labelsIds}\r\n            setCheckedIds={setQueryLabelsIds}\r\n          />\r\n        </div>\r\n      </Drawer>\r\n      <div\r\n        className={clsx(classes.content, {\r\n          [classes.shift]: drawer,\r\n          [classes.unshift]: !drawer\r\n        })}\r\n      >\r\n        <NoteList\r\n          notes={notes}\r\n          desktop={desktop}\r\n          openEditor={openEditor}\r\n          deleteNote={deleteNote}\r\n        />\r\n      </div>\r\n      <Fab\r\n        className={clsx(classes.fab, {\r\n          [classes.shift]: drawer,\r\n          [classes.unshift]: !drawer\r\n        })}\r\n        color=\"primary\"\r\n        aria-label=\"add\"\r\n        onClick={openEditor()}\r\n      >\r\n        <AddRoundedIcon />\r\n      </Fab>\r\n    </>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n        handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Notes;\r\n","import React, { useRef } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport LabelsContainer from '../containers/LabelsContainer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ArrowBackRoundedIcon from '@material-ui/icons/ArrowBackRounded';\r\nimport BookmarksRoundedIcon from '@material-ui/icons/BookmarksRounded';\r\nimport SaveRoundedIcon from '@material-ui/icons/SaveRounded';\r\nimport * as MarkdownConverter from '../services/markdown-converter';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  toolbar: {\r\n    display: \"flex\",\r\n    flexFlow: \"row wrap\",\r\n    height: 112,\r\n    padding: theme.spacing(0.5, 2)\r\n  },\r\n  leftBlock: {\r\n    flex: \"1 0 0\",\r\n    alignSelf: \"flex-start\",\r\n    display: \"flex\"\r\n  },\r\n  rightBlock: {\r\n    flex: \"1 0 0\",\r\n    alignSelf: \"flex-start\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\"\r\n  },\r\n  titleBlock: {\r\n    flex: \"1 0 100%\",\r\n    //alignSelf: \"flex-start\",\r\n    paddingBottom: theme.spacing(1.5),\r\n    paddingLeft: theme.spacing(7)\r\n  },\r\n  note: {\r\n    padding: theme.spacing(17, 2, 0, 2),\r\n    minHeight: \"100vh\"\r\n  },\r\n  inputRoot: {\r\n    color: \"rgb(255, 255, 255)\",\r\n    fontSize: \"1.5rem\",\r\n    lineHeight: 1.33,\r\n    letterSpacing: \"0em\",\r\n    \"&.MuiInput-underline:after\": {\r\n      borderBottomColor: \"rgb(255, 255, 255)\"\r\n    },\r\n    \"&.MuiInput-underline:before\": {\r\n      borderBottomColor: \"rgba(255, 255, 255, 0.42)\"\r\n    },\r\n    \"&.MuiInput-underline:hover:before\": {\r\n      borderBottomColor: \"rgba(255, 255, 255, 0.42)\"\r\n    }\r\n  },\r\n  drawerPaper: {\r\n    width: 256,\r\n    padding: theme.spacing(1, 0),\r\n    [theme.breakpoints.up('sm')]: {\r\n      zIndex: theme.zIndex.appBar - 1,\r\n      top: 112\r\n    }\r\n  },\r\n  fab: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      bottom: theme.spacing(3),\r\n      right: theme.spacing(5) + 256,\r\n    }\r\n  },\r\n  changeModeBtn: {\r\n    position: \"fixed\",\r\n    top: theme.spacing(2) + 112,\r\n    right: theme.spacing(2) + 256\r\n  }\r\n}));\r\n\r\nconst Editor = ({ note, desktop, drawer, toggleDrawer, changeField, setLabelsIds, saveNote, closeNote, showRendered, changeRenderedMode }) => {\r\n  const inputBody = useRef(null);\r\n  const classes = useStyles();\r\n\r\n  const onInputFocus = () => {\r\n    if (inputBody.current) {\r\n      inputBody.current.focus();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <AppBar position=\"fixed\">\r\n        <div className={classes.toolbar}>\r\n          <div className={classes.leftBlock}>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={closeNote}>\r\n              <ArrowBackRoundedIcon />\r\n            </IconButton>\r\n          </div>\r\n          <div className={classes.rightBlock}>\r\n            {!desktop && (\r\n              <IconButton edge=\"end\" color=\"inherit\" onClick={toggleDrawer}>\r\n                <BookmarksRoundedIcon />\r\n              </IconButton>\r\n            )}\r\n          </div>\r\n          <div className={classes.titleBlock}>\r\n            <Input\r\n              fullWidth\r\n              classes={{\r\n                root: classes.inputRoot\r\n              }}\r\n              autoComplete=\"off\"\r\n              value={note.title}\r\n              name=\"title\"\r\n              placeholder=\"Title\"\r\n              onChange={changeField}\r\n            />\r\n          </div>\r\n        </div>\r\n      </AppBar>\r\n      <Drawer\r\n        classes={{\r\n          paper: classes.drawerPaper\r\n        }}\r\n        variant={desktop ? \"persistent\" : \"temporary\"}\r\n        open={desktop ? true : drawer}\r\n        onClose={toggleDrawer}\r\n        anchor=\"right\"\r\n      >\r\n        <LabelsContainer\r\n          open={drawer}\r\n          checkedIds={note.labelsIds}\r\n          setCheckedIds={setLabelsIds}\r\n        />\r\n      </Drawer>\r\n      <Paper\r\n        square={false}\r\n        elevation={0}\r\n        className={classes.note}\r\n        onClick={onInputFocus}\r\n      >\r\n      {\r\n        showRendered\r\n          ? MarkdownConverter.toReactElement(note.text)\r\n          : (\r\n            <InputBase\r\n              fullWidth\r\n              inputRef={inputBody}\r\n              multiline={true}\r\n              autoComplete=\"off\"\r\n              value={note.text}\r\n              name=\"text\"\r\n              onChange={changeField}\r\n              placeholder=\"Content\"\r\n            />\r\n          )\r\n      }\r\n      </Paper>\r\n      <Button \r\n        className={classes.changeModeBtn}\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={changeRenderedMode}\r\n      >\r\n        Mode\r\n      </Button>\r\n      <Fab\r\n        className={classes.fab}\r\n        color=\"primary\"\r\n        aria-label=\"add\"\r\n        onClick={saveNote}\r\n      >\r\n        <SaveRoundedIcon />\r\n      </Fab>\r\n    </>\r\n  );\r\n};\r\n\r\n/*Editor.propTypes = {\r\n  handleChange: PropTypes.func\r\n};*/\r\n\r\nexport default Editor;\r\n","import React, { useState, useEffect,useContext } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { AppContext } from '../containers/App';\r\nimport Editor from '../components/Editor';\r\n\r\nconst EditorContainer = ({ note, saveNote, closeEditor }) => {\r\n  const { desktop } = useContext(AppContext);\r\n  const [drawer, setDrawer] = useState(false);\r\n  const [editedNote, setEditedNote] = useState(note);\r\n  const [showRendered, setShowRendered] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setEditedNote(note);\r\n  }, [note]);\r\n\r\n  const toggleDrawer = () => {\r\n    setDrawer(!drawer);\r\n  };\r\n\r\n  const setLabelsIds = (labelsIds) => {\r\n    setEditedNote({ ...editedNote, labelsIds: labelsIds });\r\n  };\r\n\r\n  const changeField = ({ target: { name, value } }) => {\r\n    setEditedNote({ ...editedNote, [name]: value });\r\n  };\r\n\r\n  const closeNote = () => {\r\n    closeEditor();\r\n  };\r\n\r\n  const changeRenderedMode = () => {\r\n    setShowRendered(!showRendered);\r\n  }\r\n\r\n  return (\r\n    <Editor\r\n      desktop={desktop}\r\n      drawer={drawer}\r\n      toggleDrawer={toggleDrawer}\r\n      note={editedNote}\r\n      changeField={changeField}\r\n      setLabelsIds={setLabelsIds}\r\n      saveNote={saveNote(editedNote)}\r\n      closeNote={closeNote}\r\n      showRendered={showRendered}\r\n      changeRenderedMode={changeRenderedMode}\r\n    />\r\n  );\r\n};\r\n\r\n/*EditorContainer.propTypes = {\r\n  noteList: PropTypes.exact({\r\n    id: PropTypes.number,\r\n    title: PropTypes.string,\r\n    body: PropTypes.string,\r\n    namespaces: PropTypes.arrayOf(PropTypes.string)\r\n  })\r\n};*/\r\n\r\nexport default EditorContainer;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport { getNotesData, createNoteData, updateNoteData, deleteNoteData } from '../services/notes';\r\nimport { AppContext } from '../containers/App';\r\nimport Notes from '../components/Notes';\r\nimport EditorContainer from './EditorContainer';\r\n\r\nconst NotesContainer = () => {\r\n  const { desktop } = useContext(AppContext);\r\n  const [drawer, setDrawer] = useState(desktop);\r\n  const [query, setQuery] = useState({ string: '', labelsIds: [] });\r\n  const [notes, setNotes] = useState([]);\r\n  const [note, setNote] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setNotes(getNotesData(query));\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    setDrawer(desktop);\r\n  }, [desktop]);\r\n\r\n  const toggleDrawer = () => {\r\n    setDrawer(!drawer);\r\n  };\r\n\r\n  const changeQueryString = ({ target: { value } }) => {\r\n    setQuery({ ...query, string: value });\r\n  };\r\n\r\n  const setQueryLabelsIds = (checkedIds) => {\r\n    setQuery({ ...query, labelsIds: checkedIds });\r\n  };\r\n\r\n  const openEditor = (note) => () => {\r\n    note = note || {\r\n      labelsIds: [],\r\n      title: '',\r\n      text: ''\r\n    };\r\n    setNote(note);\r\n  };\r\n\r\n  const closeEditor = () => {\r\n    setNote(null);\r\n  };\r\n\r\n  const saveNote = (editedNote) => () => {\r\n    let newNoteData;\r\n    if (editedNote.id) {\r\n      newNoteData = updateNoteData(editedNote);\r\n    } else {\r\n      newNoteData = createNoteData(editedNote);\r\n    };\r\n    setNote(newNoteData);\r\n    setNotes(getNotesData(query));\r\n  };\r\n\r\n  const deleteNote = (id) => () => {\r\n    deleteNoteData(id);\r\n    setNotes(getNotesData(query));\r\n  };\r\n  return (\r\n    note\r\n      ? (\r\n        <EditorContainer\r\n          note={note}\r\n          saveNote={saveNote}\r\n          closeEditor={closeEditor}\r\n        />\r\n      )\r\n      : (\r\n        <Notes\r\n          desktop={desktop}\r\n          drawer={drawer}\r\n          toggleDrawer={toggleDrawer}\r\n          notes={notes}\r\n          query={query}\r\n          changeQueryString={changeQueryString}\r\n          setQueryLabelsIds={setQueryLabelsIds}\r\n          openEditor={openEditor}\r\n          deleteNote={deleteNote}\r\n        />\r\n      )\r\n  );\r\n};\r\n\r\n/*SearchContainer.propTypes = {\r\n  noteList: PropTypes.exact({\r\n    id: PropTypes.number,\r\n    title: PropTypes.string,\r\n    body: PropTypes.string,\r\n    namespaces: PropTypes.arrayOf(PropTypes.string)\r\n  })\r\n};*/\r\n\r\nexport default NotesContainer;\r\n","import React, { useState, useEffect, createContext } from 'react';\r\nimport { parseHash } from '../services/auth';\r\nimport { initApp } from '../services/notes';\r\nimport Loading from '../components/Loading';\r\nimport NotesContainer from './NotesContainer';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\nconst AppContext = createContext(null);\r\n\r\nconst App = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const desktop = useMediaQuery('(min-width:600px)');\r\n\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      try {\r\n        const hash = window.location.hash;\r\n        if (hash) {\r\n          parseHash(hash);\r\n        } else {\r\n          await initApp();\r\n        };\r\n      } catch ({ message }) {\r\n        setError(message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      };\r\n    };\r\n    init();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <AppContext.Provider\r\n        value={{\r\n          isLoading,\r\n          setIsLoading,\r\n          error,\r\n          setError,\r\n          desktop\r\n        }}\r\n      >\r\n        {\r\n          isLoading\r\n            ? <Loading />\r\n            : <NotesContainer />\r\n        }\r\n      </AppContext.Provider>\r\n    </>\r\n  )\r\n};\r\n\r\nexport { AppContext, App };\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './containers/App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}